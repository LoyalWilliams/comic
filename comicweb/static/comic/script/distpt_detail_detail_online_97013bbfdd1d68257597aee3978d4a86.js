var Zepto=function(){function t(t){return null==t?String(t):V[J.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function s(e){return"object"==t(e)}function o(t){return s(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function a(t){return t instanceof Array}function r(t){return"number"==typeof t.length}function _(t){return L.call(t,function(t){return null!=t})}function c(t){return t.length>0?k.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(t){return t in P?P[t]:P[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function h(t,e){return"number"==typeof e&&!j[l(t)]?e+"px":e}function u(t){var e,i;if(!N[t]){e=A.createElement(t);A.body.appendChild(e);i=getComputedStyle(e,"").getPropertyValue("display");e.parentNode.removeChild(e);"none"==i&&(i="block");N[t]=i}return N[t]}function f(t){return"children"in t?T.call(t.children):k.map(t.childNodes,function(t){if(1==t.nodeType)return t})}function p(t,e,i){for(w in e)if(i&&(o(e[w])||a(e[w]))){if(o(e[w])&&!o(t[w]))t[w]={};if(a(e[w])&&!a(t[w]))t[w]=[];p(t[w],e[w],i)}else if(e[w]!==x)t[w]=e[w]}function g(t,e){return null==e?k(t):k(t).filter(e)}function m(t,i,n,s){return e(i)?i.call(t,n,s):i}function v(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function $(t,e){var i=t.className,n=i&&i.baseVal!==x;if(e===x)return n?i.baseVal:i;n?i.baseVal=e:t.className=e}function y(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:!/^0/.test(t)&&!isNaN(e=Number(t))?e:/^[\[\{]/.test(t)?k.parseJSON(t):t):t}catch(i){return t}}function b(t,e){e(t);for(var i in t.childNodes)b(t.childNodes[i],e)}var x,w,k,I,C,E,S=[],T=S.slice,L=S.filter,A=window.document,N={},P={},j={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},D=/^\s*<(\w+|!)[^>]*>/,R=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,M=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],U=A.createElement("table"),q=A.createElement("tr"),H={tr:A.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:q,th:q,"*":A.createElement("div")},G=/complete|loaded|interactive/,W=/^[\w-]*$/,V={},J=V.toString,X={},Q=A.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};X.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,s=t.parentNode,o=!s;if(o)(s=Q).appendChild(t);n=~X.qsa(s,e).indexOf(t);o&&Q.removeChild(t);return n};C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})};E=function(t){return L.call(t,function(e,i){return t.indexOf(e)==i})};X.fragment=function(t,e,i){var n,s,a;if(R.test(t))n=k(A.createElement(RegExp.$1));if(!n){if(t.replace)t=t.replace(O,"<$1></$2>");if(e===x)e=D.test(t)&&RegExp.$1;if(!(e in H))e="*";a=H[e];a.innerHTML=""+t;n=k.each(T.call(a.childNodes),function(){a.removeChild(this)})}if(o(i)){s=k(n);k.each(i,function(t,e){if(F.indexOf(t)>-1)s[t](e);else s.attr(t,e)})}return n};X.Z=function(t,e){t=t||[];t.__proto__=k.fn;t.selector=e||"";return t};X.isZ=function(t){return t instanceof X.Z};X.init=function(t,i){var n;if(!t)return X.Z();else if("string"==typeof t){t=t.trim();if("<"==t[0]&&D.test(t))n=X.fragment(t,RegExp.$1,i),t=null;else if(i!==x)return k(i).find(t);else n=X.qsa(A,t)}else if(e(t))return k(A).ready(t);else if(X.isZ(t))return t;else if(a(t))n=_(t);else if(s(t))n=[t],t=null;else if(D.test(t))n=X.fragment(t.trim(),RegExp.$1,i),t=null;else if(i!==x)return k(i).find(t);else n=X.qsa(A,t);return X.Z(n,t)};k=function(t,e){return X.init(t,e)};k.extend=function(t){var e,i=T.call(arguments,1);if("boolean"==typeof t){e=t;t=i.shift()}i.forEach(function(i){p(t,i,e)});return t};X.qsa=function(t,e){var i,s="#"==e[0],o=!s&&"."==e[0],a=s||o?e.slice(1):e,r=W.test(a);return n(t)&&r&&s?(i=t.getElementById(a))?[i]:[]:1!==t.nodeType&&9!==t.nodeType?[]:T.call(r&&!s?o?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))};k.contains=function(t,e){return t!==e&&t.contains(e)};k.type=t;k.isFunction=e;k.isWindow=i;k.isArray=a;k.isPlainObject=o;k.isEmptyObject=function(t){var e;for(e in t)return!1;return!0};k.inArray=function(t,e,i){return S.indexOf.call(e,t,i)};k.camelCase=C;k.trim=function(t){return null==t?"":String.prototype.trim.call(t)};k.uuid=0;k.support={};k.expr={};k.map=function(t,e){var i,n,s,o=[];if(r(t))for(n=0;n<t.length;n++){i=e(t[n],n);if(null!=i)o.push(i)}else for(s in t){i=e(t[s],s);if(null!=i)o.push(i)}return c(o)};k.each=function(t,e){var i,n;if(r(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t};k.grep=function(t,e){return L.call(t,e)};if(window.JSON)k.parseJSON=JSON.parse;k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){V["[object "+e+"]"]=e.toLowerCase()});k.fn={forEach:S.forEach,reduce:S.reduce,push:S.push,sort:S.sort,indexOf:S.indexOf,concat:S.concat,map:function(t){return k(k.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return k(T.apply(this,arguments))},ready:function(t){if(G.test(A.readyState)&&A.body)t(k);else A.addEventListener("DOMContentLoaded",function(){t(k)},!1);return this},get:function(t){return t===x?T.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){if(null!=this.parentNode)this.parentNode.removeChild(this)})},each:function(t){S.every.call(this,function(e,i){return t.call(e,i,e)!==!1});return this},filter:function(t){if(e(t))return this.not(this.not(t));else return k(L.call(this,function(e){return X.matches(e,t)}))},add:function(t,e){return k(E(this.concat(k(t,e))))},is:function(t){return this.length>0&&X.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==x)this.each(function(e){if(!t.call(this,e))i.push(this)});else{var n="string"==typeof t?this.filter(t):r(t)&&e(t.item)?T.call(t):k(t);this.forEach(function(t){if(n.indexOf(t)<0)i.push(t)})}return k(i)},has:function(t){return this.filter(function(){return s(t)?k.contains(this,t):k(this).find(t).size()})},eq:function(t){return t===-1?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!s(t)?t:k(t)},last:function(){var t=this[this.length-1];return t&&!s(t)?t:k(t)},find:function(t){var e,i=this;if("object"==typeof t)e=k(t).filter(function(){var t=this;return S.some.call(i,function(e){return k.contains(e,t)})});else if(1==this.length)e=k(X.qsa(this[0],t));else e=this.map(function(){return X.qsa(this,t)});return e},closest:function(t,e){var i=this[0],s=!1;if("object"==typeof t)s=k(t);for(;i&&!(s?s.indexOf(i)>=0:X.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return k(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=k.map(i,function(t){if((t=t.parentNode)&&!n(t)&&e.indexOf(t)<0){e.push(t);return t}});return g(e,t)},parent:function(t){return g(E(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return T.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return L.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return k.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display"))this.style.display=u(this.nodeName)})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=k(t).get(0),s=n.parentNode||this.length>1;return this.each(function(e){k(this).wrapAll(i?t.call(this,e):s?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){k(this[0]).before(t=k(t));for(var e;(e=t.children()).length;)t=e.first();k(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=k(this),s=n.contents(),o=i?t.call(this,e):t;s.length?s.wrapAll(o):n.append(o)})},unwrap:function(){this.parent().each(function(){k(this).replaceWith(k(this).children())});return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=k(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return k(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return k(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;k(this).empty().append(m(this,t,e,i))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===x?"":""+t})},attr:function(t,e){var i;return"string"==typeof t&&e===x?0==this.length||1!==this[0].nodeType?x:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:this.each(function(i){if(1===this.nodeType)if(s(t))for(w in t)v(this,w,t[w]);else v(this,t,m(this,e,i,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&v(this,t)})},prop:function(t,e){t=Y[t]||t;return e===x?this[0]&&this[0][t]:this.each(function(i){this[t]=m(this,e,i,this[t])})},data:function(t,e){var i=this.attr("data-"+t.replace(M,"-$1").toLowerCase(),e);
return null!==i?y(i):x},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=m(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=k(this),n=m(this,t,e,i.offset()),s=i.offsetParent().offset(),o={top:n.top-s.top,left:n.left-s.left};if("static"==i.css("position"))o.position="relative";i.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n=this[0],s=getComputedStyle(n,"");if(!n)return;if("string"==typeof e)return n.style[C(e)]||s.getPropertyValue(e);else if(a(e)){var o={};k.each(a(e)?e:[e],function(t,e){o[e]=n.style[C(e)]||s.getPropertyValue(e)});return o}}var r="";if("string"==t(e))if(!i&&0!==i)this.each(function(){this.style.removeProperty(l(e))});else r=l(e)+":"+h(e,i);else for(w in e)if(!e[w]&&0!==e[w])this.each(function(){this.style.removeProperty(l(w))});else r+=l(w)+":"+h(w,e[w])+";";return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(k(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){if(!t)return!1;else return S.some.call(this,function(t){return this.test($(t))},d(t))},addClass:function(t){if(!t)return this;else return this.each(function(e){I=[];var i=$(this),n=m(this,t,e,i);n.split(/\s+/g).forEach(function(t){if(!k(this).hasClass(t))I.push(t)},this);I.length&&$(this,i+(i?" ":"")+I.join(" "))})},removeClass:function(t){return this.each(function(e){if(t===x)return $(this,"");I=$(this);m(this,t,e,I).split(/\s+/g).forEach(function(t){I=I.replace(d(t)," ")});$(this,I.trim())})},toggleClass:function(t,e){if(!t)return this;else return this.each(function(i){var n=k(this),s=m(this,t,i,$(this));s.split(/\s+/g).forEach(function(t){(e===x?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})})},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];if(t===x)return e?this[0].scrollTop:this[0].pageYOffset;else return this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];if(t===x)return e?this[0].scrollLeft:this[0].pageXOffset;else return this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=B.test(e[0].nodeName)?{top:0,left:0}:e.offset();i.top-=parseFloat(k(t).css("margin-top"))||0;i.left-=parseFloat(k(t).css("margin-left"))||0;n.top+=parseFloat(k(e[0]).css("border-top-width"))||0;n.left+=parseFloat(k(e[0]).css("border-left-width"))||0;return{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!B.test(t.nodeName)&&"static"==k(t).css("position");)t=t.offsetParent;return t})}};k.fn.detach=k.fn.remove;["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});k.fn[t]=function(s){var o,a=this[0];if(s===x)return i(a)?a["inner"+e]:n(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t];else return this.each(function(e){a=k(this);a.css(t,m(this,s,e,a[t]()))})}});z.forEach(function(e,i){var n=i%2;k.fn[e]=function(){var e,s,o=k.map(arguments,function(i){e=t(i);return"object"==e||"array"==e||null==i?i:X.fragment(i)}),a=this.length>1;if(o.length<1)return this;else return this.each(function(t,e){s=n?e:e.parentNode;e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;o.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!s)return k(t).remove();b(s.insertBefore(t,e),function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src))window["eval"].call(window,t.innerHTML)})})})};k.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){k(t)[e](this);return this}});X.Z.prototype=k.fn;X.uniq=E;X.deserializeValue=y;k.zepto=X;return k}();window.Zepto=Zepto;void 0===window.$&&(window.$=Zepto);!function(t){function e(t){return t._zid||(t._zid=h++)}function i(t,i,o,a){i=n(i);if(i.ns)var r=s(i.ns);return(g[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||r.test(t.ns))&&(!o||e(t.fn)===e(o))&&(!a||t.sel==a)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function s(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function o(t,e){return t.del&&!v&&t.e in $||!!e}function a(t){return y[t]||v&&$[t]||t}function r(i,s,r,_,l,h,u){var f=e(i),p=g[f]||(g[f]=[]);s.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(r);var s=n(e);s.fn=r;s.sel=l;if(s.e in y)r=function(e){var i=e.relatedTarget;if(!i||i!==this&&!t.contains(this,i))return s.fn.apply(this,arguments)};s.del=h;var f=h||r;s.proxy=function(t){t=c(t);if(!t.isImmediatePropagationStopped()){t.data=_;var e=f.apply(i,t._args==d?[t]:[t].concat(t._args));if(e===!1)t.preventDefault(),t.stopPropagation();return e}};s.i=p.length;p.push(s);if("addEventListener"in i)i.addEventListener(a(s.e),s.proxy,o(s,u))})}function _(t,n,s,r,_){var c=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,s,r).forEach(function(e){delete g[c][e.i];if("removeEventListener"in t)t.removeEventListener(a(e.e),e.proxy,o(e,_))})})}function c(e,i){if(i||!e.isDefaultPrevented){i||(i=e);t.each(k,function(t,n){var s=i[t];e[t]=function(){this[n]=b;return s&&s.apply(i,arguments)};e[n]=x});if(i.defaultPrevented!==d?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())e.isDefaultPrevented=b}return e}function l(t){var e,i={originalEvent:t};for(e in t)if(!w.test(e)&&t[e]!==d)i[e]=t[e];return c(i,t)}var d,h=(t.zepto.qsa,1),u=Array.prototype.slice,f=t.isFunction,p=function(t){return"string"==typeof t},g={},m={},v="onfocusin"in window,$={focus:"focusin",blur:"focusout"},y={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents";t.event={add:r,remove:_};t.proxy=function(i,n){if(f(i)){var s=function(){return i.apply(n,arguments)};s._zid=e(i);return s}else if(p(n))return t.proxy(i[n],i);else throw new TypeError("expected function")};t.fn.bind=function(t,e,i){return this.on(t,e,i)};t.fn.unbind=function(t,e){return this.off(t,e)};t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var b=function(){return!0},x=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)};t.fn.undelegate=function(t,e,i){return this.off(e,t,i)};t.fn.live=function(e,i){t(document.body).delegate(this.selector,e,i);return this};t.fn.die=function(e,i){t(document.body).undelegate(this.selector,e,i);return this};t.fn.on=function(e,i,n,s,o){var a,c,h=this;if(e&&!p(e)){t.each(e,function(t,e){h.on(t,i,n,e,o)});return h}if(!p(i)&&!f(s)&&s!==!1)s=n,n=i,i=d;if(f(n)||n===!1)s=n,n=d;if(s===!1)s=x;return h.each(function(d,h){if(o)a=function(t){_(h,t.type,s);return s.apply(this,arguments)};if(i)c=function(e){var n,o=t(e.target).closest(i,h).get(0);if(o&&o!==h){n=t.extend(l(e),{currentTarget:o,liveFired:h});return(a||s).apply(o,[n].concat(u.call(arguments,1)))}};r(h,e,s,n,i,c||a)})};t.fn.off=function(e,i,n){var s=this;if(e&&!p(e)){t.each(e,function(t,e){s.off(t,i,e)});return s}if(!p(i)&&!f(n)&&n!==!1)n=i,i=d;if(n===!1)n=x;return s.each(function(){_(this,e,n,i)})};t.fn.trigger=function(e,i){e=p(e)||t.isPlainObject(e)?t.Event(e):c(e);e._args=i;return this.each(function(){if("dispatchEvent"in this)this.dispatchEvent(e);else t(this).triggerHandler(e,i)})};t.fn.triggerHandler=function(e,n){var s,o;this.each(function(a,r){s=l(p(e)?t.Event(e):e);s._args=n;s.target=r;t.each(i(r,e.type||e),function(t,e){o=e.proxy(s);if(s.isImmediatePropagationStopped())return!1})});return o};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}});["focus","blur"].forEach(function(e){t.fn[e]=function(t){if(t)this.bind(e,t);else this.each(function(){try{this[e]()}catch(t){}});return this}});t.Event=function(t,e){if(!p(t))e=t,t=e.type;var i=document.createEvent(m[t]||"Events"),n=!0;if(e)for(var s in e)"bubbles"==s?n=!!e[s]:i[s]=e[s];i.initEvent(t,n,!0);return c(i)}}(Zepto);!function(t){function e(e,i,n){var s=t.Event(i);t(e).trigger(s,n);return!s.isDefaultPrevented()}function i(t,i,n,s){if(t.global)return e(i||v,n,s)}function n(e){if(e.global&&0===t.active++)i(e,null,"ajaxStart")}function s(e){if(e.global&&!--t.active)i(e,null,"ajaxStop")}function o(t,e){var n=e.context;if(e.beforeSend.call(n,t,e)===!1||i(e,n,"ajaxBeforeSend",[t,e])===!1)return!1;i(e,n,"ajaxSend",[t,e])}function a(t,e,n,s){var o=n.context,a="success";n.success.call(o,t,a,e);if(s)s.resolveWith(o,[t,a,e]);i(n,o,"ajaxSuccess",[e,n,t]);_(a,e,n)}function r(t,e,n,s,o){var a=s.context;s.error.call(a,n,e,t);if(o)o.rejectWith(a,[n,e,t]);i(s,a,"ajaxError",[n,s,t||e]);_(e,n,s)}function _(t,e,n){var o=n.context;n.complete.call(o,e,t);i(n,o,"ajaxComplete",[e,n]);s(n)}function c(){}function l(t){if(t)t=t.split(";",2)[0];return t&&(t==w?"html":t==x?"json":y.test(t)?"script":b.test(t)&&"xml")||"text"}function d(t,e){if(""==e)return t;else return(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){if(e.processData&&e.data&&"string"!=t.type(e.data))e.data=t.param(e.data,e.traditional);if(e.data&&(!e.type||"GET"==e.type.toUpperCase()))e.url=d(e.url,e.data),e.data=void 0}function u(e,i,n,s){var o=!t.isFunction(i);return{url:e,data:o?i:void 0,success:!o?i:t.isFunction(n)?n:void 0,dataType:o?s||n:n}}function f(e,i,n,s){var o,a=t.isArray(i),r=t.isPlainObject(i);t.each(i,function(i,_){o=t.type(_);
if(s)i=n?s:s+"["+(r||"object"==o||"array"==o?i:"")+"]";if(!s&&a)e.add(_.name,_.value);else if("array"==o||!n&&"object"==o)f(e,_,n,i);else e.add(i,_)})}var p,g,m=0,v=window.document,$=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,y=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,x="application/json",w="text/html",k=/^\s*$/;t.active=0;t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,s,_=e.jsonpCallback,c=(t.isFunction(_)?_():_)||"jsonp"+ ++m,l=v.createElement("script"),d=window[c],h=function(e){t(l).triggerHandler("error",e||"abort")},u={abort:h};if(i)i.promise(u);t(l).on("load error",function(o,_){clearTimeout(s);t(l).off().remove();if("error"==o.type||!n)r(null,_||"error",u,e,i);else a(n[0],u,e,i);window[c]=d;if(n&&t.isFunction(d))d(n[0]);d=n=void 0});if(o(u,e)===!1){h("abort");return u}window[c]=function(){n=arguments};l.src=e.url.replace(/=\?/,"="+c);v.head.appendChild(l);if(e.timeout>0)s=setTimeout(function(){h("timeout")},e.timeout);return u};t.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};t.ajax=function(e){var i=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(p in t.ajaxSettings)if(void 0===i[p])i[p]=t.ajaxSettings[p];n(i);if(!i.crossDomain)i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host;if(!i.url)i.url=window.location.toString();h(i);if(i.cache===!1)i.url=d(i.url,"_="+Date.now());var _=i.dataType,u=/=\?/.test(i.url);if("jsonp"==_||u){if(!u)i.url=d(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?");return t.ajaxJSONP(i,s)}var f,m=i.accepts[_],v={},$=function(t,e){v[t.toLowerCase()]=[t,e]},y=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,b=i.xhr(),x=b.setRequestHeader;if(s)s.promise(b);if(!i.crossDomain)$("X-Requested-With","XMLHttpRequest");$("Accept",m||"*/*");if(m=i.mimeType||m){if(m.indexOf(",")>-1)m=m.split(",",2)[0];b.overrideMimeType&&b.overrideMimeType(m)}if(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())$("Content-Type",i.contentType||"application/x-www-form-urlencoded");if(i.headers)for(g in i.headers)$(g,i.headers[g]);b.setRequestHeader=$;b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=c;clearTimeout(f);var e,n=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==y){_=_||l(i.mimeType||b.getResponseHeader("content-type"));e=b.responseText;try{if("script"==_)(0,eval)(e);else if("xml"==_)e=b.responseXML;else if("json"==_)e=k.test(e)?null:t.parseJSON(e)}catch(o){n=o}if(n)r(n,"parsererror",b,i,s);else a(e,b,i,s)}else r(b.statusText||null,b.status?"error":"abort",b,i,s)}};if(o(b,i)===!1){b.abort();r(null,"abort",b,i,s);return b}if(i.xhrFields)for(g in i.xhrFields)b[g]=i.xhrFields[g];var w="async"in i?i.async:!0;b.open(i.type,i.url,w,i.username,i.password);for(g in v)x.apply(b,v[g]);if(i.timeout>0)f=setTimeout(function(){b.onreadystatechange=c;b.abort();r(null,"timeout",b,i,s)},i.timeout);b.send(i.data?i.data:null);return b};t.get=function(e,i,n,s){return t.ajax(u.apply(null,arguments))};t.post=function(e,i,n,s){var o=u.apply(null,arguments);o.type="POST";return t.ajax(o)};t.getJSON=function(e,i,n){var s=u.apply(null,arguments);s.dataType="json";return t.ajax(s)};t.fn.load=function(e,i,n){if(!this.length)return this;var s,o=this,a=e.split(/\s/),r=u(e,i,n),_=r.success;if(a.length>1)r.url=a[0],s=a[1];r.success=function(e){o.html(s?t("<div>").html(e.replace($,"")).find(s):e);_&&_.apply(o,arguments)};t.ajax(r);return this};var I=encodeURIComponent;t.param=function(t,e){var i=[];i.add=function(t,e){this.push(I(t)+"="+I(e))};f(i,t,e);return i.join("&").replace(/%20/g,"+")}}(Zepto);!function(t){t.fn.serializeArray=function(){var e,i=[];t([].slice.call(this.get(0).elements)).each(function(){e=t(this);var n=e.attr("type");if("fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&("radio"!=n&&"checkbox"!=n||this.checked))i.push({name:e.attr("name"),value:e.val()})});return i};t.fn.serialize=function(){var t=[];this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))});return t.join("&")};t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i);if(!i.isDefaultPrevented())this.get(0).submit()}return this}}(Zepto);!function(t){if(!("__proto__"in{}))t.extend(t.zepto,{Z:function(e,i){e=e||[];t.extend(e,t.fn);e.selector=i||"";e.__Z=!0;return e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var i=getComputedStyle;window.getComputedStyle=function(t){try{return i(t)}catch(e){return null}}}}(Zepto);I$(185,function(t,e,i,n,s){function o(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}s=e._$klass();var a=s._$extend(t._$$Abstract),r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];a.__reset=function(t){var e=t.radius,i=t.blurAlphaChannel,n=t.element,s=new Image;s.src=t.src;s.onload=function(){var t=document.createElement("canvas");t.style.width=s.naturalWidth+"px";t.style.height=s.naturalHeight+"px";t.width=s.naturalWidth;t.height=s.naturalHeight;var o=t.getContext("2d");o.clearRect(0,0,s.naturalWidth,s.naturalHeight);o.drawImage(s,0,0);if(!(isNaN(e)||e<1)){if(i)a.__stackBlurCanvasRGBA(t,0,0,s.naturalWidth,s.naturalHeight,e);else a.__stackBlurCanvasRGB(t,0,0,s.naturalWidth,s.naturalHeight,e);n.style.backgroundImage='url("/images/gradient.png"),url('+t.toDataURL()+")"}}};a.__stackBlurCanvasRGBA=function(t,e,i,n,s,a){if(!(isNaN(a)||a<1)){a|=0;var c,l=t.getContext("2d");try{try{c=l.getImageData(e,i,n,s)}catch(d){try{window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");c=l.getImageData(e,i,n,s)}catch(d){alert("Cannot access local image");throw new Error("unable to access local image data: "+d)}}}catch(d){alert("Cannot access image");throw new Error("unable to access image data: "+d)}var h,u,f,p,g,m,v,$,y,b,x,w,k,I,C,E,S,T,L,A,N,P,j,D,R=c.data,O=a+a+1,B=n-1,M=s-1,F=a+1,z=F*(F+1)/2,U=new o,q=U;for(f=1;f<O;f++){q=q.next=new o;if(f==F)var H=q}q.next=U;var G=null,W=null;v=m=0;var V=r[a],J=_[a];for(u=0;u<s;u++){E=S=T=L=$=y=b=x=0;w=F*(A=R[m]);k=F*(N=R[m+1]);I=F*(P=R[m+2]);C=F*(j=R[m+3]);$+=z*A;y+=z*N;b+=z*P;x+=z*j;q=U;for(f=0;f<F;f++){q.r=A;q.g=N;q.b=P;q.a=j;q=q.next}for(f=1;f<F;f++){p=m+((B<f?B:f)<<2);$+=(q.r=A=R[p])*(D=F-f);y+=(q.g=N=R[p+1])*D;b+=(q.b=P=R[p+2])*D;x+=(q.a=j=R[p+3])*D;E+=A;S+=N;T+=P;L+=j;q=q.next}G=U;W=H;for(h=0;h<n;h++){R[m+3]=j=x*V>>J;if(0!=j){j=255/j;R[m]=($*V>>J)*j;R[m+1]=(y*V>>J)*j;R[m+2]=(b*V>>J)*j}else R[m]=R[m+1]=R[m+2]=0;$-=w;y-=k;b-=I;x-=C;w-=G.r;k-=G.g;I-=G.b;C-=G.a;p=v+((p=h+a+1)<B?p:B)<<2;E+=G.r=R[p];S+=G.g=R[p+1];T+=G.b=R[p+2];L+=G.a=R[p+3];$+=E;y+=S;b+=T;x+=L;G=G.next;w+=A=W.r;k+=N=W.g;I+=P=W.b;C+=j=W.a;E-=A;S-=N;T-=P;L-=j;W=W.next;m+=4}v+=n}for(h=0;h<n;h++){S=T=L=E=y=b=x=$=0;m=h<<2;w=F*(A=R[m]);k=F*(N=R[m+1]);I=F*(P=R[m+2]);C=F*(j=R[m+3]);$+=z*A;y+=z*N;b+=z*P;x+=z*j;q=U;for(f=0;f<F;f++){q.r=A;q.g=N;q.b=P;q.a=j;q=q.next}g=n;for(f=1;f<=a;f++){m=g+h<<2;$+=(q.r=A=R[m])*(D=F-f);y+=(q.g=N=R[m+1])*D;b+=(q.b=P=R[m+2])*D;x+=(q.a=j=R[m+3])*D;E+=A;S+=N;T+=P;L+=j;q=q.next;if(f<M)g+=n}m=h;G=U;W=H;for(u=0;u<s;u++){p=m<<2;R[p+3]=j=x*V>>J;if(j>0){j=255/j;R[p]=($*V>>J)*j;R[p+1]=(y*V>>J)*j;R[p+2]=(b*V>>J)*j}else R[p]=R[p+1]=R[p+2]=0;$-=w;y-=k;b-=I;x-=C;w-=G.r;k-=G.g;I-=G.b;C-=G.a;p=h+((p=u+F)<M?p:M)*n<<2;$+=E+=G.r=R[p];y+=S+=G.g=R[p+1];b+=T+=G.b=R[p+2];x+=L+=G.a=R[p+3];G=G.next;w+=A=W.r;k+=N=W.g;I+=P=W.b;C+=j=W.a;E-=A;S-=N;T-=P;L-=j;W=W.next;m+=n}}l.putImageData(c,e,i)}};a.__stackBlurCanvasRGB=function(t,e,i,n,s,a){if(!(isNaN(a)||a<1)){a|=0;var c,l=t.getContext("2d");try{try{c=l.getImageData(e,i,n,s)}catch(d){try{window.netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");c=l.getImageData(e,i,n,s)}catch(d){alert("Cannot access local image");throw new Error("unable to access local image data: "+d)}}}catch(d){alert("Cannot access image");throw new Error("unable to access image data: "+d)}var h,u,f,p,g,m,v,$,y,b,x,w,k,I,C,E,S,T,L,A,N=c.data,P=a+a+1,j=n-1,D=s-1,R=a+1,O=R*(R+1)/2,B=new o,M=B;
for(f=1;f<P;f++){M=M.next=new o;if(f==R)var F=M}M.next=B;var z=null,U=null;v=m=0;var q=r[a],H=_[a];for(u=0;u<s;u++){I=C=E=$=y=b=0;x=R*(S=N[m]);w=R*(T=N[m+1]);k=R*(L=N[m+2]);$+=O*S;y+=O*T;b+=O*L;M=B;for(f=0;f<R;f++){M.r=S;M.g=T;M.b=L;M=M.next}for(f=1;f<R;f++){p=m+((j<f?j:f)<<2);$+=(M.r=S=N[p])*(A=R-f);y+=(M.g=T=N[p+1])*A;b+=(M.b=L=N[p+2])*A;I+=S;C+=T;E+=L;M=M.next}z=B;U=F;for(h=0;h<n;h++){N[m]=$*q>>H;N[m+1]=y*q>>H;N[m+2]=b*q>>H;$-=x;y-=w;b-=k;x-=z.r;w-=z.g;k-=z.b;p=v+((p=h+a+1)<j?p:j)<<2;I+=z.r=N[p];C+=z.g=N[p+1];E+=z.b=N[p+2];$+=I;y+=C;b+=E;z=z.next;x+=S=U.r;w+=T=U.g;k+=L=U.b;I-=S;C-=T;E-=L;U=U.next;m+=4}v+=n}for(h=0;h<n;h++){C=E=I=y=b=$=0;m=h<<2;x=R*(S=N[m]);w=R*(T=N[m+1]);k=R*(L=N[m+2]);$+=O*S;y+=O*T;b+=O*L;M=B;for(f=0;f<R;f++){M.r=S;M.g=T;M.b=L;M=M.next}g=n;for(f=1;f<=a;f++){m=g+h<<2;$+=(M.r=S=N[m])*(A=R-f);y+=(M.g=T=N[m+1])*A;b+=(M.b=L=N[m+2])*A;I+=S;C+=T;E+=L;M=M.next;if(f<D)g+=n}m=h;z=B;U=F;for(u=0;u<s;u++){p=m<<2;N[p]=$*q>>H;N[p+1]=y*q>>H;N[p+2]=b*q>>H;$-=x;y-=w;b-=k;x-=z.r;w-=z.g;k-=z.b;p=h+((p=u+R)<D?p:D)*n<<2;$+=I+=z.r=N[p];y+=C+=z.g=N[p+1];b+=E+=z.b=N[p+2];z=z.next;x+=S=U.r;w+=T=U.g;k+=L=U.b;I-=S;C-=T;E-=L;U=U.next;m+=n}}l.putImageData(c,e,i)}};a.__destroy=function(){this.__super()};return s},36,31,2,5);I$(128,function(t,e,i,n,s,o,a,r,_){r._$$sysMatch=t._$klass();_=r._$$sysMatch._$extend(e._$$Abstract);_.__reset=function(t){this.__super(t)};_.IosORAndroid=function(){var t={versions:function(){var t=navigator.userAgent.toLowerCase();navigator.appVersion;return{android:t.indexOf("android")>-1||t.indexOf("adr")>-1,uc:t.indexOf("uc")>-1,qq:t.indexOf("qq")>-1,sg:t.indexOf("sogou")>-1,iphone:t.indexOf("iPhone")>-1,iPad:t.indexOf("ipad")>-1,bd:t.indexOf("baidu")>-1}}()};return t};_.sysCanShare=function(){var t=navigator.userAgent.toLowerCase(),e=(navigator.appVersion,1==window.clientPage||t.indexOf("micromessenger")>-1||t.indexOf("yixin")>-1||t.indexOf("qq")>-1||t.indexOf("weibo")>-1);return e};_.href=function(t){i._$get(t).href="/download"};return r},31,36,2,32);I$(160,function(t,e,i){function n(t){return window.btoa(window.encodeURIComponent(JSON.stringify(t)))}function s(t,i,n,s){if(!e.ios())try{window._flyflowNative.exec.apply(window._flyflowNative,arguments)}catch(o){console.log(o)}else{var a="baidubrowserapp://bdcomic?action="+i+"&params="+(n||"")+"&func="+(s||"");r().src=a}}function o(t){var e="callback"+ +new Date;window[e]=function(i){var n;try{n=JSON.parse(window.decodeURIComponent(window.atob(i)))}catch(s){console.log(i);n=null}t&&t(n);window[e]=void 0};return e}var a=null,r=function(){return function(){var t=document.createElement("iframe");document.head.appendChild(t);var e=function(){t.parentNode.removeChild(t)};t.onerror=e;t.onload=e;return t}}();i._$setChapterInfo=function(t,e){s("bdcomic","setChapterInfo",n(t),o(e))};i._$setPagesInfo=function(t){s("bdcomic","setPagesInfo",n(t),null)};i._$share=function(){s("bdcomic","shareWebPage",n(a),null)};i._$close=function(){s("bdcomic","notifyPageLoad",null,null)};i._$initShare=function(e){if(!a){a=t._$merge({shareSource:8001},e);window.comicNativeGetShareInfo=function(){i._$share()}}};i._$setShareData=function(e){t._$merge(a,e)}},3,12);I$(156,function(t,e,i,n,s,o,a,r){r._$$CacheComic=t._$klass();var _=r._$$CacheComic._$extend(e._$$CacheAbstract);_._$getData=function(t){var e=this.__getDataInCache(t);if(!e){var n=t+"_getData",s=this._$dispatchEvent._$bind(this,"ondataload",{type:"getData",_key:t});if(!this.__doQueueRequest(n,s))i._$request("/comic/source.json",{onload:function(e){this.__setDataInCache(t,e);this.__doCallbackRequest(n)}._$bind(this)})}else this._$dispatchEvent("ondataload",{key:t,type:"getData"})};_._$favorite=function(t){var e=t+"_favorite",o=this._$dispatchEvent._$bind(this,"ondataload",{type:"favorite",key:t}),a=this.__getDataInCache(t);if(a){var r="/subscribe/"+(a.subscribed?"delete":"add")+".json";if(!this.__doQueueRequest(e,o))i._$request(r,{method:"POST",type:"json",data:{bookIds:t},onload:function(t){if(200!=t.code){this.__doClearReqQueue(e);if(401==t.code){var i=location.pathname+location.search;location.href="/login/form.do?targetUrl="+encodeURIComponent(i)}}else{if(window.PG_CONFIG&&window.PG_CONFIG.isSogou){var s={id:window.PG_CONFIG.bookId,title:window.PG_CONFIG.bookTitle,author:window.PG_CONFIG.bookAuthor,latest:window.PG_CONFIG.latestSectionTitle,latest_id:window.PG_CONFIG.latestSectionId,cover:window.PG_CONFIG.cover,latestPublishTime:window.PG_CONFIG.updateTime,progress:window.PG_CONFIG.progress,progress_id:window.PG_CONFIG.progress_id};if(a.subscribed)n._$unCollect(s);else n._$collect(s)}a.subscribed=!a.subscribed;this.__doCallbackRequest(e)}}._$bind(this),onerror:function(){s._$toast({tipContent:"缃戠粶閿欒",delay:1500});this.__doClearReqQueue(e)}._$bind(this)})}else if(window.__DEV__)console.error("Comic item is null, the favorite action is not performed")};_._$addbookProgress=function(t){var e=t.bookId+"_bookProgress",s=this._$dispatchEvent._$bind(this,"ondataload",{type:"bookProgress",key:t.bookId});if(window.PG_CONFIG&&window.PG_CONFIG.isSogou)n._$progress({id:window.PG_CONFIG.bookId,title:window.PG_CONFIG.bookTitle,author:window.PG_CONFIG.bookAuthor,latest:window.PG_CONFIG.latestSectionTitle,cover:window.PG_CONFIG.cover,latestPublishTime:window.PG_CONFIG.updateTime,progress:t.sectionTitleOrder,progress_id:t.sectionId});var o="/bookProgress/add.json";if(!this.__doQueueRequest(e,s))i._$request(o,{method:"POST",type:"json",data:{bookId:t.bookId,sectionId:t.sectionId,page:t.page},onload:function(t){this.__doCallbackRequest(e)}._$bind(this),onerror:function(){this.__doClearReqQueue(e)}._$bind(this)})};_._$statistic=function(t){var e="/statistic/book/click/"+t.bookId+"/"+t.sectionId+".json";i._$request(e,{method:"GET",type:"json",onload:function(t){}._$bind(this)})};_._$actionReport=function(t){var e="/reportAction.json";i._$request(e,{method:"POST",type:"json",data:{target:t.target,actionCost:t.actionCost,action:t.action},onload:function(t){}._$bind(this)})};_._$saveSections=function(t){var e=t.data,n=t.onLoad,s=t.onError,o="/trade/saveSections.json";i._$request(o,{type:"json",data:e,method:"post",onload:function(t){n(t)},onerror:function(t){s(t)}})};_._$buySection=function(t){var e=t.data,n=t.onLoad,s=t.onError,o="/trade/purchase/async.json";i._$request(o,{type:"json",data:e,method:"post",onload:function(t){n(t)},onerror:function(t){s(t)}})};_._$loadSection=function(t){var e=t.data||{},n=t.onLoad,s=t.onError,o="/reader/section/"+e.bookId+"/"+e.sectionId+".json";i._$request(o,{type:"json",data:{open:e.open||!1},method:"post",onload:function(t){n(t)},onerror:function(t){s(t)}})};return r},31,81,14,16,17,160,12);I$(130,function(t,e,i,n,s,o,a,r,_,c){var l;a._$$Tab=e._$klass();l=a._$$Tab._$extend(o._$$EventTarget);l.__reset=function(t){this.__super(t);this.__name=t.event||"click";this.__selected=t.selected||"js-selected";this.__disabled=t.disabled||"js-disabled";this.__inversed=!!t.inverse;this.__doTabListCheck(t.list);this._$go(t.index||0)};l.__destroy=function(){var t=function(t){this.__doTabItemSelect(t,!1)};return function(){this.__super();n._$forEach(this.__list,t,this);delete this.__list;delete this.__name;delete this.__index;delete this.__disabled;delete this.__selected;delete this.__inversed}}();l.__doTabListCheck=function(){var t=function(t){if(t){this.__list.push(t);var e=this.__list.length-1,i=this.__cblist[e];if(!i){i=this._$go._$bind(this,e);this.__cblist[e]=i}this.__doInitDomEvent([[t,this.__name,i]])}};return function(e){this.__list=[];if(!this.__cblist)this.__cblist=[];n._$forEach(e,t,this)}}();l.__doTabItemSelect=function(t,e){e&&!this.__inversed?s._$addClassName(t,this.__selected):s._$delClassName(t,this.__selected)};l._$go=function(t,e){var n=this.__list[t];if(1!=e&&(t==this.__index||!n||s._$hasClassName(n,this.__disabled)))i._$stopDefault(arguments[1]);var o={stopped:!0,index:t,last:this.__index,list:this._$getList(),data:s._$dataset(n,"value")};this.__index=t;n=this.__list[o.last];if(n)this.__doTabItemSelect(n,!1);n=this.__list[this.__index];this.__doTabItemSelect(n,!0);this._$dispatchEvent("onchange",o);if(o.stopped)i._$stopDefault(arguments[1])};l._$getIndex=function(){return this.__index};l._$getList=function(){return this.__list};if(!0)t.copy(t.P("nej.ut"),a);return a},19,31,5,3,2,32);I$(97,function(t,e,i,n,s,o,a){var r;n._$$Item=e._$klass();r=n._$$Item._$extend(i._$$Abstract);r.__init=function(){this.__id=this.__genId();this.__super()};r.__reset=function(t){this.__super(t);this.__index=t.index;this.__total=t.total;this.__range=t.range;this._$refresh(t.data)};r.__destroy=function(){this.__super();delete this.__data;delete this.__index;delete this.__total;delete this.__range};r.__doRefresh=o;r.__genId=function(){var t=+new Date;return function(){return"itm-"+ ++t}}();r._$getId=function(){return this.__id};r._$getData=function(){return this.__data};r._$refresh=function(t){this.__data=t||{};this.__doRefresh(this.__data)};if(!0)t.copy(t.P("nej.ui"),n);return n},19,31,36);I$(95,function(t,e,i,n,s,o,a){var r;n._$$ListItem=e._$klass();r=n._$$ListItem._$extend(i._$$Item);r.__reset=function(t){this.__pkey=t.pkey||"id";this.__prefix=t.prefix||"";this.__super(t)};r.__onDelete=function(t){this._$dispatchEvent("ondelete",{ext:t,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};r.__onUpdate=function(t){this._$dispatchEvent("onupdate",{ext:t,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};r._$refresh=function(t){this.__super(t);var e=this.__data[this.__pkey];this.__id=this.__prefix+e||this.__genId()};if(!0)t.copy(t.P("nej.ui"),n);return n},19,31,97);I$(100,".#<uispace>{font-size:12px;line-height:160%;} .#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;} .#<uispace> .js-disabled{cursor:default;} .#<uispace> .js-selected{cursor:default;background-color:#bbb;}");I$(98,function(t,e,i,n,s,o,a,r,_,c,l){var d;r._$$AbstractPager=e._$klass();d=r._$$AbstractPager._$extend(s._$$Abstract);d.__reset=function(t){this.__bopt=n._$merge({},t);this.__popt=n._$merge({},t);
delete this.__bopt.onchange;this.__popt.onchange=this.__onChange._$bind(this);this.__super(t);this.__doResetNumber(t)};d.__destroy=function(){if(this.__page){this.__page._$recycle();delete this.__page}this.__super();delete this.__bopt;delete this.__popt;this._$unbind();this.__body.innerHTML="&nbsp;"};d.__initXGui=function(){var t=i._$pushCSSText(a);return function(){this.__seed_css=t}}();d.__doResetNumber=function(t){var e=t.label||_;if(!t.noprv){this.__popt.pbtn=i._$create("a","zbtn zprv",this.__body);this.__popt.pbtn.innerHTML=e.prev||"涓婁竴椤�"}for(var n=[],s=1,o=t.number;s<=o;s++)n.push(i._$create("a","zpgi zpg"+s,this.__body));this.__popt.list=n;if(!t.nonxt){this.__popt.nbtn=i._$create("a","zbtn znxt",this.__body);this.__popt.nbtn.innerHTML=e.next||"涓嬩竴椤�"}};d.__onChange=function(t){if(!this.__flag){var e=t.index,i=t.total;this.__flag=!0;this._$updatePage(e,i);n._$forEach(this.__binders,function(t){t._$updatePage(e,i)});this.__flag=!1;this._$dispatchEvent("onchange",t)}};d._$bind=function(t){t=i._$get(t);if(t){var e=n._$merge({},this.__bopt);e.parent=t;e.index=this._$getIndex();e.total=this._$getTotal();var s=this.constructor._$allocate(e);s._$setEvent("onchange",this.__popt.onchange);if(!this.__binders)this.__binders=[];this.__binders.push(s)}};d._$unbind=function(){var t=function(t,e,i){t._$recycle();i.splice(e,1)};return function(){n._$reverseEach(this.__binders,t)}}();d._$setIndex=function(t){if(this.__page)this.__page._$setIndex(t)};d._$getIndex=function(){if(!this.__page)return 1;else return this.__page._$getIndex()};d._$getTotal=function(){if(!this.__page)return 1;else return this.__page._$getTotal()};d._$updatePage=function(t,e){if(this.__page)this.__page._$updatePage(t,e)};d._$updateTotal=function(t){if(this.__page)this.__page._$updateTotal(t)};if(!0)t.copy(t.P("nej.ui"),r);return r},19,31,2,3,36,40,100);I$(101,function(t,e,i,n,s,o,a,r,_,c){var l;a._$$PageAbstract=e._$klass();l=a._$$PageAbstract._$extend(o._$$EventTarget);l.__reset=function(t){this.__super(t);this.__pbtn=t.pbtn;this.__nbtn=t.nbtn;this.__sbtn=t.sbtn;this.__ebtn=t.ebtn;this.__name=t.event||"click";this.__parented=!!t.parented;this.__selected=t.selected||"js-selected";this.__disabled=t.disabled||"js-disabled";this.__doPageListCheck(t.list);this.__limit=t.limit||1/0;this._$updatePage(t.index||1,t.total||1)};l.__destroy=function(){this.__super();delete this.__list;delete this.__name;delete this.__pbtn;delete this.__nbtn;delete this.__sbtn;delete this.__ebtn;delete this.__last;delete this.__total;delete this.__index;delete this.__extdata;delete this.__selected;delete this.__disabled};l.__getSelectNode=function(t){return!this.__parented?t:t.parentNode};l.__doPageListCheck=function(){var t=function(t){this.__list.push(t);this.__doInitDomEvent([[t,this.__name,this.__onClick._$bind2(this,0)]])};return function(e){this.__list=[];this.__doInitDomEvent([[this.__pbtn,"click",this.__onClick._$bind2(this,-1)],[this.__nbtn,"click",this.__onClick._$bind2(this,1)],[this.__sbtn,"click",this.__onClick._$bind2(this,-2)],[this.__ebtn,"click",this.__onClick._$bind2(this,2)]]);i._$forEach(e,t,this)}}();l.__doSetNodeIndex=function(t,e){var i=this.__getSelectNode(t);if(null==e){t.innerText="";n._$setStyle(t,"display","none");n._$delClassName(i,this.__selected)}else{t.innerText=e;n._$setStyle(t,"display","");e==this.__index?n._$addClassName(i,this.__selected):n._$delClassName(i,this.__selected)}};l.__doSyncBtnState=function(){if(this.__index<=1){n._$addClassName(this.__pbtn,this.__disabled);n._$addClassName(this.__sbtn,this.__disabled)}else{n._$delClassName(this.__pbtn,this.__disabled);n._$delClassName(this.__sbtn,this.__disabled)}if(this.__index>=this.__total){n._$addClassName(this.__nbtn,this.__disabled);n._$addClassName(this.__ebtn,this.__disabled)}else{n._$delClassName(this.__nbtn,this.__disabled);n._$delClassName(this.__ebtn,this.__disabled)}};l.__doRefreshPage=_;l.__doChangeIndex=function(){this.__doRefreshPage();this.__doSyncBtnState();this._$dispatchEvent("onchange",{last:this.__last,total:this.__total,index:this.__index,ext:this.__extdata})};l.__doSaveIndex=function(t){t=parseInt(t);if(isNaN(t)||null==this.__total)return!1;t=Math.max(1,Math.min(t,this.__total));this.__last=this.__index;this.__index=t;return!0};l.__doSaveTotal=function(t){t=parseInt(t);if(isNaN(t)||t<1)return!1;this.__total=Math.min(t,this.__limit);return!0};l.__onClick=function(t,e){s._$stopDefault(t);var i=s._$getElement(t),o=n._$hasClassName(this.__getSelectNode(i),this.__selected),a=n._$hasClassName(i,this.__disabled);if(i&&!o&&!a){var r=i.innerText;switch(e){case 1:case-1:r=this.__index+e;break;case 2:r=this.__total;break;case-2:r=1}this._$setIndex(r)}};l._$getIndex=function(){return this.__index};l._$setIndex=function(t){var e=this.__index;this.__doSaveIndex(t);if(e!=this.__index)this.__doChangeIndex()};l._$getTotal=function(){return this.__total};l._$setTotal=function(t){if(this.__doSaveTotal(t)&&null!=this.__index){this.__index=1;this.__doChangeIndex()}};l._$updateTotal=function(t){if(this.__doSaveTotal(t)){this.__doRefreshPage();this.__doSyncBtnState()}};l._$updatePage=function(t,e){if(this.__doSaveTotal(e)&&this.__doSaveIndex(t))this.__doChangeIndex()};if(!0)t.P("nej.ut")._$$AbstractPage=a._$$PageAbstract;return a},19,31,3,2,5,32);I$(99,function(t,e,i,n,s,o,a,r,_){var c;o._$$PageFragment=e._$klass();c=o._$$PageFragment._$extend(s._$$PageAbstract);c.__init=function(){this.__ndot=[];this.__super()};c.__destroy=function(){this.__super();this.__doRecycleDotNode()};c.__doRecycleDotNode=function(){var t=function(t,e,n){i._$remove(t);n.splice(e,1)};return function(){n._$reverseEach(this.__ndot,t)}}();c.__doRefreshPage=function(){this.__extdata={last:!1,first:!1,list:this.__list};this.__doRecycleDotNode();this.__doSetNodeIndex(this.__list[0],1);var t=1,e=this.__list.length;if(!(this.__total<e)){if(this.__index>1){var n=Math.floor((e-2)/2),s=this.__total-e+2,o=Math.max(2,this.__index-n);if(this.__total>=e)o=Math.min(o,s);if(o>2){var a=i._$create("span","zdot");this.__ndot.push(a);a.innerText="...";this.__list[0].insertAdjacentElement("afterEnd",a);this.__extdata.first=!0}for(var r;;t++){r=o+t-1;if(r>this.__index)break;this.__doSetNodeIndex(this.__list[t],r)}}if(this.__index<this.__total){for(var r,o=this.__index+1,_=0,c=e-2;;_++,t++){r=o+_;if(t>c||r>this.__total)break;this.__doSetNodeIndex(this.__list[t],r)}if(r<this.__total){var a=i._$create("span","zdot");this.__ndot.push(a);a.innerText="...";this.__list[t].insertAdjacentElement("beforeBegin",a);this.__extdata.last=!0}if(r<=this.__total)this.__doSetNodeIndex(this.__list[t++],this.__total)}for(;t<e;t++)this.__doSetNodeIndex(this.__list[t])}else for(var l;t<e;t++){l=t+1;this.__doSetNodeIndex(this.__list[t],l>this.__total?null:l)}};if(!0)t.P("nej.ut")._$$Page=o._$$PageFragment;return o},19,31,2,3,101);I$(96,function(t,e,i,n,s,o,a,r,_){var c;o._$$Pager=e._$klass();c=o._$$Pager._$extend(n._$$AbstractPager);c.__reset=function(t){t.number=parseInt(t.number)||9;this.__super(t);this.__page=s._$$PageFragment._$allocate(this.__popt)};c.__onChange=function(t){if(this.__bopt.noend){var e=t.ext||a,n=e.list||_;if(e.last)i._$setStyle(n[n.length-1],"display","none")}this.__super(t)};if(!0)t.copy(t.P("nej.ui"),o);return o},19,31,2,98,99);I$(94,function(t,e,i,n,s,o,a,r,_,c,l,d,h,u,f){var p;d._$$ListModule=e._$klass();p=d._$$ListModule._$extend(r._$$EventTarget);p.__reset=function(t){this.__ropt={};this.__super(t);this.__lbox=s._$get(t.parent);this.__iopt={parent:this.__lbox};this.__limit=parseInt(t.limit)||10;this.__first=parseInt(t.first)||this.__limit;this.__doResetTemplate(t.item);this.__doResetCache(t.cache||h);this.__doResetPager(t.pager||h);this._$refresh()};p.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__doClearListBox();this.__super();if(this.__ropt.clear)this.__cache._$clearListInCache(this.__ropt.key);this.__cache._$recycle();if(this.__pager){this.__pager._$recycle();delete this.__pager}delete this.__pkls;delete this.__popt;delete this.__pulling;delete this.__cache;delete this.__lbox;delete this.__ikls;delete this.__iopt;delete this.__iext;delete this.__ropt};p.__getItemBodyId=function(t){return this.__getItemId(t)+_._$seed()};p.__getItemId=function(t){var e=(this.__iopt||h).prefix||"";return e+t};p.__getPageInfo=function(t,e,i,n){var s={index:1,total:1};if(e>=t)s.index=Math.floor((e-t)/i)+2;if(n>t)s.total=Math.ceil((n-t)/i)+1;return s};p.__doResetJSTTemplate=function(t){delete this.__ikls;this.__ikey=t;this.__doInitDomEvent([[this.__lbox,"click",this.__onCheckAction._$bind(this)]])};p.__doResetTemplate=function(t){if(!i._$isString(t)){i._$merge(this.__iopt,t);this.__iext=i._$merge({},t,function(t){return!i._$isFunction(t)});var e=this.__iopt.klass;delete this.__iopt.klass;if(!i._$isString(e)){delete this.__ikey;this.__ikls=e;this.__iopt.ondelete=this._$dispatchEvent._$bind(this,"ondelete");this.__iopt.onupdate=this._$dispatchEvent._$bind(this,"onupdate")}else this.__doResetJSTTemplate(e)}else this.__doResetJSTTemplate(t)};p.__doResetCache=function(t){var e=t.klass,n=i._$merge({},t);this.__ropt.key=n.lkey;this.__ropt.ext=n.ext;this.__ropt.data=n.data||{};this.__ropt.clear=!!n.clear;this.__iopt.pkey=n.key||"id";n.onerror=this._$dispatchEvent._$bind(this,"onerror");n.onlistload=this.__cbListLoad._$bind(this);n.onpullrefresh=this.__cbPullRefresh._$bind(this);if(e&&"onlistchange"in e)this.__doInitDomEvent([[e,"listchange",this.__cbListChange._$bind(this)]]);else{n.onitemadd=this.__cbItemAdd._$bind(this);n.onitemdelete=this.__cbItemDelete._$bind(this);n.onitemupdate=this.__cbItemUpdate._$bind(this)}this.__cache=(e||l._$$CacheList)._$allocate(n);if(null!=t.total)this.__cache._$setTotal(this.__ropt.key,t.total);if(t.list)this.__cache._$setListInCache(this.__ropt.key,t.list)};p.__doResetPager=function(t){this.__pkls=t.klass||a._$$Pager;this.__popt=i._$merge({},t);if(i._$isArray(t.parent)){this.__popt.parent=t.parent[0];this.__pbid=t.parent.slice(1);if(!this.__pbid||!this.__pbid.length)delete this.__pbid}delete this.__popt.klass};p.__doClearListBox=function(){
var t=/^(?:table|tr|tbody|ul|ol|select)$/i;return function(){this._$dispatchEvent("onbeforelistclear",{parent:this.__lbox});if(this.__items&&this.__items.length>0){this.__items=this.__ikls._$recycle(this.__items);delete this.__items}if(t.test(this.__lbox.tagName))s._$clearChildren(this.__lbox);else this.__lbox.innerHTML=""}}();p.__doSwitchPagerShow=function(t){if(!this.__popt.fixed){s._$setStyle(this.__popt.parent,"display",t);i._$forEach(this.__pbid,function(e){s._$setStyle(e,"display",t)},this)}};p.__doRefreshByPager=function(){var t=this.__popt.index||1;delete this.__popt.index;if(this.__pager)t=this.__pager._$getIndex();this.__doChangePage({last:t,index:t})};p.__doChangePage=function(t){this._$dispatchEvent("onpagechange",t)};p.__doChangeOffset=function(t){this.__ropt.offset=t;this.__doLoadList()};p.__doGenRequestOpt=function(t){return t};p.__doLoadList=function(){this.__doBeforeListLoad();var t=this.__ropt.data;t.offset=this.__ropt.offset;var e=0==t.offset;t.total=e;this.__ropt.limit=e?this.__first:this.__limit;t.limit=this.__ropt.limit;this.__cache._$getList(this.__doGenRequestOpt(i._$merge({},this.__ropt)))};p.__cbListLoad=function(t){if(t.key==this.__ropt.key&&t.offset==this.__ropt.offset){this.__doBeforeListShow();var e=this.__cache._$getListInCache(t.key);if(!e||!e.length){if(!this._$cache()._$isLoaded(t.key))this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});else this.__doShowEmpty();return!0}var i=t.limit,n=t.offset;if(!this.__cache._$isFragmentFilled(t.key,n,i)){this._$dispatchEvent("onlistloaderror",{parent:this.__lbox});return!0}if(!this.__doBeforeListRender(e,n,i)){this._$dispatchEvent("onbeforelistrender",{list:e,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(t.key)});if(this.__ikey){this.__iopt.xlist=e;this.__iopt.beg=n;this.__iopt.end=Math.min(e.length,n+i)-1;this.__iopt.act="list";var s=_._$get(this.__ikey,this.__iopt,this.__iext);this.__doShowListByJST(s)}else{this.__iopt.limit=i;this.__iopt.offset=n;var o=c._$getItemTemplate(e,this.__ikls,this.__iopt);this.__doShowListByItem(o)}this._$dispatchEvent("onafterlistrender",{list:e,limit:i,offset:n,parent:this.__lbox,total:this.__cache._$getTotal(t.key)})}}};p.__cbPullRefresh=function(t){if(this.__pulling){delete this.__pulling;this.__doBeforeListShow("onafterpullrefresh");this._$refresh()}};p.__doSyncPager=function(t,e){if(this.__pager){if((this.__popt||h).limit>0)e=Math.min(e,this.__popt.limit);var n=this.__pager._$getIndex(),s=this.__pager._$getTotal();if(n>e||e!=s){this.__pager._$recycle();delete this.__pager;this.__doChangePage({last:n,index:Math.min(t,e)});return!0}}else{this.__popt.index=t;this.__popt.total=e;this.__pager=this.__pkls._$allocate(this.__popt);this.__pager._$setEvent("onchange",this.__doChangePage._$bind(this));i._$forEach(this.__pbid,function(t){this.__pager._$bind(t)},this)}};p.__doFormatData=function(){var t=+new Date;return function(e){var i=e[this.__iopt.pkey];if(!i){e["dirty-data"]=!0;e[this.__iopt.pkey]="dirty-"+t++}return e}}();p.__doSplitDirty=function(t){var e=t[this.__iopt.pkey];if(t["dirty-data"]){delete t["dirty-data"];delete t[this.__iopt.pkey]}return e};p.__doInsertOneItem=function(){var t=function(t,e){this.__lbox.insertAdjacentElement(t,e)};return function(e,i){var n=[i];if(this.__ikey){this.__iopt.xlist=n;this.__iopt.beg=0;this.__iopt.end=0;this.__iopt.act="add";this.__doShowListByJST(_._$get(this.__ikey,this.__iopt,this.__iext),e)}else{this.__iopt.limit=1;this.__iopt.offset=0;this.__iopt.parent=t._$bind(this,e);var s=c._$getItemTemplate(n,this.__ikls,this.__iopt);this.__iopt.parent=this.__lbox;this.__doShowListByItem(s)}}}();p.__doBeforeListLoad=u;p.__doBeforeListShow=function(t){var e={parent:this.__lbox};this._$dispatchEvent(t||"onafterlistload",e);if(!e.stopped)s._$removeByEC(this.__ntip)};p.__doBeforeListRender=u;p.__doRenderMessage=function(t,e){if(i._$isString(t)){if(!this.__ntip)this.__ntip=s._$create("div");this.__ntip.innerHTML=t}else this.__ntip=t;this.__lbox.insertAdjacentElement(e||"beforeEnd",this.__ntip)};p.__doShowMessage=function(t,e,i){var n={parent:this.__lbox};if(t)this._$dispatchEvent(t,n);if(!n.stopped)this.__doRenderMessage(n.value||e,i)};p.__doShowEmpty=u;p.__doShowListByJST=u;p.__doShowListByItem=u;p.__onCheckAction=function(){var t=/^(?:delete|update)$/;return function(e){var i=n._$getElement(e,"d:action");if(i){var o=s._$dataset(i,"action");if(t.test(o)){var a=s._$dataset(i,"id");if(a){var r=this.__cache._$getItemInCache(a);if(r){n._$stop(e);this._$dispatchEvent("on"+o,{data:r,id:r[this.__iopt.pkey],body:s._$get(this.__getItemBodyId(a))})}}}}}}();p.__cbItemAdd=u;p.__doDeleteItem=function(t){var e=t.data||{},i={data:e,key:this.__ropt.key,id:e[this.__iopt.pkey]};this._$dispatchEvent("onbeforedelete",i);this.__cache._$deleteItem(i)};p.__cbItemDelete=u;p.__doUpdateItem=function(t){var e=t.data||{},i={data:e,key:this.__ropt.key};this._$dispatchEvent("onbeforeupdate",i);this.__cache._$updateItem(i)};p.__cbItemUpdate=function(t){this.__doCheckResult(t,"onafterupdate");if(!t.stopped){var e=t.data[this.__iopt.pkey];if(this.__items){var n=c._$getItemById(this.__getItemId(e));if(n)n._$refresh(t.data)}else{var o=this._$getItemBody(e);if(!o)return;var a=this.__cache._$getListInCache(t.key),r=i._$indexOf(a,t.data);if(r<0)return;this.__iopt.xlist=a;this.__iopt.beg=r;this.__iopt.end=r;this.__iopt.act="update";var l=_._$get(this.__ikey,this.__iopt,this.__iext);o.insertAdjacentHTML("afterEnd",l);s._$remove(o)}this._$dispatchEvent("onafterupdaterender",{data:t.data,parent:this.__lbox})}};p.__doCheckResult=function(t,e){var i=t.data;if(!i||null==i[this.__iopt.pkey]){this._$dispatchEvent("onerror",t);t.stopped=!0}if(!t.stopped)this._$dispatchEvent(e,t)};p.__cbAppendList=u;p.__cbUnshiftList=u;p.__cbListChange=function(t){if(t.key==this.__ropt.key)switch(t.action){case"add":this.__cbItemAdd(t);break;case"delete":this.__cbItemDelete(t);break;case"update":this.__cbItemUpdate(t);break;case"refresh":this._$refresh();break;case"unshift":this.__cbUnshiftList(t.offset,t.limit);break;case"append":this.__cbAppendList(t.offset,t.limit)}};p._$update=function(t){this.__doUpdateItem({data:t})};p._$delete=function(t){this.__doDeleteItem({data:t})};p._$add=function(t){this.__cache._$addItem({data:t,key:this.__ropt.key})};p._$cache=function(){return this.__cache};p._$unshift=function(t){this.__doInsertOneItem("afterBegin",this.__doFormatData(t));return this.__doSplitDirty(t)};p._$append=function(t){this.__doInsertOneItem("beforeEnd",this.__doFormatData(t));return this.__doSplitDirty(t)};p._$refresh=function(){this.__doClearListBox();this.__doRefreshByPager()};p._$refreshWithClear=function(){this.__cache._$clearListInCache(this.__ropt.key);this._$refresh()};p._$pullRefresh=function(){if(!this.__pulling){this.__pulling=!0;this.__doShowMessage("onbeforepullrefresh","鍒楄〃鍒锋柊涓�...","afterBegin");this.__cache._$pullRefresh({key:this.__ropt.key,data:this.__ropt.data})}};p._$getTotal=function(){return this.__cache._$getTotal(this.__ropt.key)};p._$getPager=function(){return this.__pager};p._$items=function(){return this.__items};p._$getItemBody=function(t){if(this.__ikey)return s._$get(this.__getItemBodyId(t));else{var e=c._$getItemById(this.__getItemId(t));if(e)return e._$getBody()}};p._$isLoaded=function(){return this.__cache._$isLoaded(this.__ropt.key)};p._$showMessage=function(t){this.__doClearListBox();this.__doShowMessage(null,t)};if(!0)t.copy(t.P("nej.ut"),d);return d},19,31,3,5,2,95,96,32,40,37,80);I$(93,function(t,e,i,n,s,o,a,r,_,c,l){var d;r._$$ListModuleWF=e._$klass();d=r._$$ListModuleWF._$extend(a._$$ListModule);d.__reset=function(t){this.__doResetMoreBtn(t.more);this.__sbody=n._$get(t.sbody);this.__doInitDomEvent([[this.__sbody,"scroll",this.__onCheckScroll._$bind(this)]]);var e=t.delta;if(null==e)e=30;this.__delta=Math.max(0,e);var i=parseInt(t.count)||0;this.__count=Math.max(0,i);var s=parseInt(t.number)||0;if(s>1&&s<=i)this.__number=s;this.__super(t)};d.__destroy=function(){this.__super();delete this.__nmore;delete this.__sbody;delete this.__endskr;delete this.__nexting};d.__getPageInfo=function(t,e){var i=this.__first+(this.__count-1)*this.__limit,n=this.__count*this.__limit;return this.__super(i,t,n,e)};d.__doResetMoreBtn=function(t){this.__nmore=n._$get(t);this.__doInitDomEvent([[this.__nmore,"click",this._$next._$bind(this)]])};d.__doCheckScroll=function(t){if(!this.__endskr&&t&&this.__lbox.clientHeight){if(!t.scrollHeight)t=n._$getPageBox();var e=n._$offset(this.__lbox,this.__sbody),i=e.y+this.__lbox.offsetHeight-t.scrollTop-t.clientHeight,s=t.scrollHeight<=t.clientHeight;if(i<=this.__delta||s&&!this.__endskr)window.setTimeout(this._$next._$bind(this),0)}};d.__onCheckScroll=function(t){if(!this.__endskr){var e=i._$getElement(t);if(!e)e=n._$getPageBox();this.__doCheckScroll(e)}};d.__doChangePage=function(t){this.__super(t);if(!t.stopped){this.__doClearListBox();var e=0;if(t.index>1)e=this.__first+((t.index-1)*this.__count-1)*this.__limit;this.__offset=e;this._$next()}};d.__doGenRequestOpt=function(t){if(this.__number){var e=t.offset>0?this.__limit:this.__first,i=e+this.__limit*(this.__number-1);this.__offset=t.offset+i;t.data.limit=i;t.limit=i;delete this.__number}return t};d.__cbListLoad=function(t){delete this.__nexting;if(!this.__super(t))this._$resize()};d.__cbListChange=function(t){if(t.key==this.__ropt.key){switch(t.action){case"refresh":case"append":delete this.__nexting}this.__super(t)}};d.__doBeforeListLoad=function(){this.__doShowMessage("onbeforelistload","鍒楄〃鍔犺浇涓�...");n._$setStyle(this.__nmore,"display","none")};d.__doBeforeListRender=function(t,e,i){var s=t.length,o=t.loaded?e+i>=s:e+i>s;this.__offset=Math.min(this.__offset,s);n._$setStyle(this.__nmore,"display",o?"none":"");if(o)this.__endskr=!0;if(this.__count>0){var a=this.__getPageInfo(e,t.length);if(this.__doSyncPager(a.index,a.total))return!0;var r=this.__first-this.__limit,_=this.__count*this.__limit;this.__endskr=(e+i-r)%_==0||o;n._$setStyle(this.__nmore,"display",this.__endskr?"none":"");this.__doSwitchPagerShow(this.__endskr&&a.total>1?"":"none");
}};d.__doShowEmpty=function(){this.__offset=0;this.__endskr=!0;this.__doShowMessage("onemptylist","娌℃湁鍒楄〃鏁版嵁锛�")};d.__doShowListByJST=function(t,e){this.__lbox.insertAdjacentHTML(e||"beforeEnd",t)};d.__doShowListByItem=function(t){this.__items=this.__items||[];if(s._$isArray(t))l.push.apply(this.__items,t);else this.__items.push(t)};d.__cbItemAdd=function(t){n._$removeByEC(this.__ntip);this.__doCheckResult(t,"onafteradd");var e=t.flag;if(!t.stopped&&e)if(!(this.__count>0)){this.__offset+=1;e==-1?this._$unshift(t.data):this._$append(t.data)}else this.__doRefreshByPager()};d.__cbItemDelete=function(t){this.__doCheckResult(t,"onafterdelete");if(!t.stopped)if(!(this.__count>0)){var e=t.data[this.__iopt.pkey];if(this.__items){var i=o._$getItemById(this.__getItemId(e)),a=s._$indexOf(this.__items,i);if(a>=0){this.__items.splice(a,1);this.__offset-=1}if(i)i._$recycle()}else{var r=this._$getItemBody(e);if(r)this.__offset-=1;n._$remove(r)}if(this.__offset<=0)this._$next()}else this.__doRefreshByPager()};d.__cbAppendList=function(t,e){if(t==this.__offset)if(this._$isLoaded()){this.__endskr=!1;this._$resize()}};d.__cbUnshiftList=function(t,e){if(0==t)for(var i=this.__cache._$getListInCache(this.__ropt.key),n=e-1;n>=0;n--)this._$unshift(i[n])};d._$resize=function(){var t=this.__sbody;if(t&&!this.__endskr)this.__doCheckScroll(this.__sbody)};d._$refresh=function(){delete this.__endskr;this.__super()};d._$next=function(){if(!this.__nexting){this.__nexting=!0;var t=this.__offset;this.__offset+=0==t?this.__first:this.__limit;this.__doChangeOffset(t)}};if(!0)t.copy(t.P("nej.ut"),r);return r},19,31,5,2,3,37,94);I$(89,function(t,e,i,n){n._$$ListModuleWF=t._$klass();var s=n._$$ListModuleWF._$extend(e._$$ListModuleWF);s.__reset=function(t){this.__super(t);if(i._$IS.android&&/ucbrowser/i.test(navigator.userAgent))this.__delta+=40}},31,93,6);I$(192,' {if isReply} <div id="${id}" parentId="${parentId}" userName="${userNickName|escape}" class="${index,total|floor}" ><div class="j-flag"></div> {else} <div id="${id}"  userName="${userNickName|escape}" class="item comments" ><div class="j-flag head">         {if userAvatar}         <img src="${userAvatar}"> {else}         <img src="https://easyread.nosdn.127.net/web/trunk/1428048646694/user2.png"> {/if}     </div> {/if}     <div class="content">         <div class="head-bar">             <a class="user" href="javascript:;">                 <div class="u-ellipsis">${userNickName|escape}${userId|isAuthor}</div>             </a>             <a class="" href="javascript:;" style="display:block;">&nbsp;${commentTime}</a>         </div>         <p>{if toNickname}<span class="reply-text">鍥炲 </span><span>${toNickname|escape}</span>${repliedUserId|isAuthor}:{/if}${content|escape}</p>         {if img}<div class="comment-item-img-block"><img class="comment-item-img" src="${img.url|escape}" /></div>{/if}     </div> </div> {if isReply}     ${index,total|floorShow} {/if} ');I$(193,".m-comment-wrp .comments {     padding: 0 3.5% 32px 3.5%; }  .m-comment-wrp .item {     display: -webkit-box;     display: -webkit-flex;     display: -ms-flexbox;     display: flex; }  .m-comment-wrp .item .content {     -webkit-box-flex: 1;     -webkit-flex: 1;     -ms-flex: 1;     flex: 1; }  .m-comment-wrp .item .content p{     word-break:break-all;     word-wrap:break-word; }  .m-comment-wrp .item .content .head-bar {     display: -webkit-box;     display: -webkit-flex;     display: -ms-flexbox;     display: flex;     height: 14px;     line-height: 14px;     padding-top: 2px; }  .m-comment-wrp .item .content .user {     -webkit-box-flex: 1;     -webkit-flex: 1;     -ms-flex: 1;     flex: 1;     display: block;     overflow: hidden; }  .m-comment-wrp .item .ellipsis {     word-wrap: normal;     white-space: nowrap;     display: inline-block; }  .m-comment-wrp .item .content .user .reply-text {     color: #333; }  .m-comment-wrp .item .content p {     margin: 5px 0 0 0;     font-size: 14px; }  .m-comment-wrp .item .head {     width: 40px;     height: 40px;     font-size: 0;     margin-right: 10px; }  .m-comment-wrp .item .head img {     width: 100%;     height: 100%;     border-radius: 20px; }  .m-comment-wrp .item a {     font-size: 12px;     color: #999; }  .m-comment-wrp .reply {     border-top: 1px solid #eaeaea;     border-left: 1px solid #eaeaea;     border-right: 1px solid #eaeaea;     background-color: #fafafa;     padding: 8px 5px; }  .m-comment-wrp .r-first {     margin-top: 8px; }  .m-comment-wrp .r-last {     border-bottom: 1px solid #eaeaea; }  .m-comment-wrp .r-only {     margin-top: 8px;     border-bottom: 1px solid #eaeaea; }  .u-none {     display: none; }  .floor-show {     position: relative;     padding: 0;     height: 22px;     background-color: #f5f5f5;     border-top: 1px solid #eaeaea;     border-left: 1px solid #eaeaea;     border-right: 1px solid #eaeaea; }  .launch {     position: absolute;     bottom: 0;     left: 50%;     width: 79px;     height: 16px;     margin-left: -40px; }    .comment-item-img {     max-width: 100%;     max-height: 330px; } .comment-item-img-block {     margin: 5px 0;     line-height: 0; }");I$(194,"  .comment-pub {     position: fixed;     z-index: 0;     width: 100%;     height: 54px;     line-height: 52px;     left: 0;     bottom: 0;     background-color: #f2f2f2;     text-align: center;     border-top: 1px solid #dcdcdc;     border-bottom: 1px solid #f2f2f2;     box-sizing: border-box; }  .j-placeholder {     display: inline-block;     width: 90%;     height: 36px;     line-height: 36px;     border: 1px solid #dcdcdc;     box-sizing: border-box;     border-radius: 18px;     vertical-align: middle;     text-align: left;     padding-left: 17px;     color: #999;     background-color: #fff;     font-size: 14px; }  .pub-wrap {     display: none;     position: fixed;     z-index: 1;     left: 0;     top: 0;     width: 100%;     height: 100%;     background-color: rgba(244,244,244,.9);      transition: transform 0.5s;     -moz-transition: -moz-transform 0.5s;     -webkit-transition: -webkit-transform 0.5s;     -o-transition: -o-transform 0.5s;      -webkit-transform: translate3d(0, 100%, 0);     transform: translate3d(0, 100%, 0); }  .pub-wrap.in {     -webkit-transform: translate3d(0, 0, 0);     transform: translate3d(0, 0, 0); } html.fixed .view {     position: relative !important; } .pub-wrap-align{     position: relative;     overflow: hidden;     margin: 0 5%; } .pub-wrap .pub {     width: 64px;     height: 29px;     line-height: 29px;     border-radius: 14.5px;     background-color: #ff5f65;     color: #fff;     text-align: center;     font-size: 13px; }  .pub-wrap textarea {     padding: 5px 5px 0 5px;     border-radius: 5px;     margin: 48px 0 5px 0;     height: 150px;     display: block;     width: 100%;     background-color: #fff;     border: 1px solid rgb(220,220,220);     box-sizing:border-box; } .pub-wrap .wordNumber {     margin: 0;     padding-left:12px;     font-size: 12px;     color: #413d3a; } .pub-wrap .wordNumber span{     color: #ff0000;  } .pub-wrap textarea:focus {     outline: none; }  .bgcolor-grey {     background-color: transparent!important;     border: none!important; }  .color-grey {     color: #666!important;     font-weight: normal!important; }  .u-space {     margin: 0 3px 2px 0; } ");I$(195,'<div id="comment-pub" class="comment-pub">     <div class="j-placeholder">鍢熼棴鍢达紒鏈帇鏈夎瘽瑕佽 ( 藰鈥⑾夆€⑺� )</div> </div> <div id="pub-wrap" class="pub-wrap">     <div id="pub-wrap-align" class="pub-wrap-align">         <header class="navbar-1 navbar--absolute bgcolor-grey" role="banner">             <a id="comment-back" href="javascript:void(0)" class="navbar-back navbar-back--static navbar-back--largeClick"><i class="icon icon-mh icon-close--grey"></i></a>             <h1 class="color-grey">鍙戣〃璇勮</h1>             <div class="pub">鍙戣〃</div>         </header>         <textarea id="area" class="pub-content u-appearance" placeholder="璇峰ぇ鐜嬪彂璇� >///<"></textarea>         <p id="wordNumber" class="wordNumber"></p>     </div> </div>');I$(187,function(t,e,i,n,s,o,a,r,_,c,l,d,h){h._$$CommentAdd=t._$klass();var u=h._$$CommentAdd._$extend(i._$$Abstract);u.__initXGui=function(){var t=a._$pushCSSText(n),e=r._$addNodeTemplate(s);return function(){this.__seed_css=t;this.__seed_html=e}}();u.__reset=function(t){this.__super(t);this.options=t;this.create=t.create;this.prevent=!1;this.sub=!0;this._tipToast=c._$$Toast._$allocate({parent:document.body});$("#comment-pub").css("bottom","0");if(!t.isShow)$("#comment-pub").parent().hide();this.sysMatch=l._$$sysMatch._$allocate({});this.__doClearDomEvent();this.__doInitDomEvent([[document.body,"touchstart",this.__onTouchstart._$bind(this)],[document.body,"touchmove",this.__onTouchmove._$bind(this)],[window,"scroll",this.__onScroll._$bind(this)],[a._$get("comment-pub"),"click",this.__showPanel._$bind(this)],[a._$getByClassName(this.__body,"pub")[0],"click",this.__doPub._$bind(this)],[a._$get("pub-wrap"),"transitionend",this.__onTransitionEnd._$bind(this)]]);a._$get("area").onfocus=function(){setTimeout(function(){this.fixIOS5PositionFixed()}._$bind(this),500)}._$bind(this);o._$addEvent(a._$get("comment-back"),"click",this.__doBack._$bind(this))};u.__onTransitionEnd=function(){this.startY=void 0;this.__animating=!1;if(!a._$hasClassName(a._$get("pub-wrap"),"in"))document.getElementById("pub-wrap").style.display="none";else{a._$get("view").style.position="static";a._$get("view").style.top="-"+this.__scrollTop+"px";this.__endskr=this.create.__list.__endskr;this.create.__list.__endskr=!0;a._$addClassName(document.documentElement,"fixed");document.getElementById("pub-wrap").style.position="fixed"}};u.__hideModal=function(){a._$get("view").style.top="0";a._$delClassName(document.documentElement,"fixed");document.body.scrollTop=this.__scrollTop;document.getElementById("pub-wrap").style.position="fixed";this.__animating=!0;a._$delClassName(a._$get("pub-wrap"),"in");this.create.__list.__endskr=this.__endskr};u.__showPanel=function(t){var e=a._$get("islogin").value;
if("login"!=e){var i=location.search;if(""==i)i+="?";else i+="&";var n=location.pathname+i+"signed_in_callback_xhr=1#comment";location.href="/login/form.do?targetUrl="+encodeURIComponent(n);return 0}else{a._$getByClassName("pub-wrap","pub-content")[0].setAttribute("placeholder","璇峰ぇ鐜嬪彂璇� >///<");this.__scrollTop=a._$getPageBox().scrollTop;this.__animating=!0;$("#pub-wrap").css("display","block");d.requestAnimationFrame(function(){a._$addClassName(a._$get("pub-wrap"),"in")});if(t){a._$get("pub-wrap").children[0].children[0].children[1].innerHTML="鍙戣〃璇勮";a._$get("cIds").value="false"}}};u.__doBack=function(t){a._$getByClassName("pub-wrap","pub-content")[0].setAttribute("placeholder","璇峰ぇ鐜嬪彂璇� >///<");a._$get("wordNumber").innerHTML="";this.__hideModal();this.fixIOS5PositionFixed()};u.__onTouchstart=function(t){if(this.__animating)o._$stopDefault(t);this.startY=document.body.scrollTop;this.startYfortouch=document.body.scrollTop};u.__onTouchmove=function(t){if(!this.__animating)setTimeout(function(){var t=document.body.scrollTop;if(t-this.startYfortouch>=0&&0!=document.body.scrollTop)this.__doCboxHide();else this.__doCboxShow()}._$bind(this),200)};u.__onScroll=function(t){if(void 0!=this.startY){var e=document.body.scrollTop,i=e-this.startY;if(i>=0&&0!=document.body.scrollTop)this.__doCboxHide();else this.__doCboxShow()}};u.__doCboxShow=function(){$("#comment-pub").show()};u.__doCboxHide=function(){$("#comment-pub").hide()};u.__sysMatch=function(){if(this.sysMatch.IosORAndroid().versions.sg){var t=a._$get("comment-pub").getBoundingClientRect().top;if(this.sub){this.top=t-47;this.sub=!1}$("#comment-pub").css("top",this.top)}};u.__doPub=function(){if(!this.prevent){this.prevent=!0;var t=this.__regular(a._$getByClassName(this.__body,"pub-content")[0].value);if(!(t.length>500))if(0!==t.length){var e=a._$get("value-bookId").value,i=a._$get("cIds").value,n=a._$get("cIds").getAttribute("cI"),s=a._$get("cIds").getAttribute("rI"),o={};if("level1"==s)o={bookId:e,csrfToken:window.SITE_CONFIG.csrfToken,comment:t,commentId:n};else o={bookId:e,csrfToken:window.SITE_CONFIG.csrfToken,comment:t,commentId:n,repliedCommentId:s};var r="false"==i?"/comment/"+e+"/add.json":"/comment/"+e+"/reply.json",c=isNaN(parseInt(a._$get("tab-comment-count").innerHTML))?0:parseInt(a._$get("tab-comment-count").innerHTML);_._$request(r,{data:o,type:"json",method:"POST",onload:function(t){a._$get("wordNumber").innerHTML="";var e=t.code;if(200==e){this.__hideModal();if(this.create.__list)this.create.__list._$recycle();this.create.createComments();a._$get("tab-comment-count").innerHTML=c+1;this._tipToast._$toastShow({tipContent:"鎶ュ憡澶х帇锛佸彂璇濇垚鍔燂紒",delay:1500});a._$getByClassName("pub-wrap","pub-content")[0].value="";this.prevent=!1}else if(401==e){var i=location.search;if(""==i)i+="?";else i+="&";var n=location.pathname+i+"signed_in_callback_xhr=1";location.href="/login/form.do?targetUrl="+encodeURIComponent(n);return}else if(500==e){this._tipToast._$toastShow({tipContent:"杈撳叆鏈夎~璇烽噸鏂拌緭鍏�",delay:1500});this.prevent=!1}else if(500!=e){this._tipToast._$toastShow({tipContent:"鏈嶅姟鍣ㄥ紑灏忓樊锛佸ぇ鐜嬬◢鍚庡啀璇� >^<",delay:1500});this.prevent=!1}}._$bind(this),onerror:function(t){this._tipToast._$toastShow({tipContent:"缃戠粶閿欒",delay:1500});this.prevent=!1}._$bind(this)})}else{this._tipToast._$toastShow({tipContent:"璇峰ぇ鐜嬭鐐逛粈涔� >///<",delay:1500});this.prevent=!1}else{a._$get("wordNumber").innerHTML="<span>宸茶秴鍑�"+(t.length-500)+"瀛�</span>/闄�500瀛�";this.prevent=!1}}};u.fixIOS5PositionFixed=function(){setTimeout(function(){document.body.scrollTop+=0},20)};u.__regular=function(t){return t.replace(/ /g,"")};return h},31,3,36,194,195,5,2,37,43,17,128,64);I$(186,function(t,e,i,n,s,o,a,r,_,c){var l=e._$klass(),d=l._$extend(t._$$ListItem);d.__initXGui=function(){var t=i._$pushCSSText(a),e=s._$add(o);return function(){this.cssSeed=t;this.htmlSeed=e}}();d.__reset=function(t){this.__super(t)};d.__doRefresh=function(){var t=this._$getData(),e=i._$get("value-userId").value;t.isReply=!1;t.userNickName=t.userNickName;t.content=t.content||"";if(t.img)t.img=c.parse(t.img);this.__body.innerHTML=s._$get(this.htmlSeed,t,{isAuthor:function(t){var i=t==e?'<i class="icon icon-mh icon-author--yellow"></i>':"";return i},getImgDimension:function(){var t=(window.innerWidth-30-18)/3;return'style="width:'+t+"px;height:"+152*t/108+'px"'}});var n;if(t.replies)for(n in t.replies){var o=t.replies[n];o.parentId=t.id;o.isReply=!0;o.userNickName=o.userNickName;o.content=o.content||"";if(o.toNickname){o.toNickname=this.getStr(o.toNickname,7);o.toNickname=o.toNickname}o.index=parseInt(n);o.total=t.replies.length;this.__body.children[0].children[1].innerHTML+=s._$get(this.htmlSeed,o,{isAuthor:function(t){var i=t==e?'<i class="icon icon-mh icon-author--yellow"></i>':"";return i},floor:function(t,e){if(1===e)return"reply r-only";if(0===t)return"reply r-first";if(t===e-1)return"reply r-last";if(1===t)return"reply";else return"reply u-none"},floorShow:function(t,e){if(e>=4&&1===t)return'<div class="s-flag floor-show" onclick="var parent = this.parentNode.parentNode;var c = parent.children[1].children;for (var k = 5; k < c.length; k++) {c[k].style.display = \'block\'; this.style.display = \'none\';event.stopPropagation();}"><img class="launch" src="/images/launch.png"></div>';else return""}})}this.__doClearDomEvent();this.__doInitDomEvent([[this.__body,"click",this.__doReply._$bind(this)]]);var a,r=i._$getByClassName(this.__body,"reply");for(a in r)r[a].onclick=function(t){var e=_._$$CommentAdd._$getInstance(),n=e.__showPanel();if(0!==n){i._$get("cIds").value="true";i._$get("cIds").setAttribute("cI",this.getAttribute("parentId"));i._$get("cIds").setAttribute("rI",this.getAttribute("id"));i._$getByClassName("pub-wrap","pub-content")[0].setAttribute("placeholder","鍥炲 "+this.getAttribute("userName")+":");i._$get("pub-wrap").children[0].children[0].children[1].innerHTML="鍙戣〃鍥炲";t.stopPropagation()}}};d.__doReply=function(){if(!window.PG_CONFIG||!window.PG_CONFIG.noSendComment){var t=_._$$CommentAdd._$getInstance(),e=t.__showPanel();if(0!==e){i._$get("cIds").value="true";i._$get("cIds").setAttribute("cI",this.__body.children[0].getAttribute("id"));i._$get("cIds").setAttribute("rI","level1");i._$getByClassName("pub-wrap","pub-content")[0].setAttribute("placeholder","鍥炲 "+this.__body.children[0].getAttribute("userName")+":");i._$get("pub-wrap").children[0].children[0].children[1].innerHTML="鍙戣〃鍥炲"}}};d.__onDelButtonClick=function(){this._$dispatchEvent("ondelete",this._$getData())};d.__destroy=function(){this.__super()};d.getStr=function(t,e){var i,n,s=0,o="",a="";for(i=0;i<t.length;i++){n=t.charCodeAt(i);a=t.charAt(i);if(n>255)s+=2;else s++;if(s>2*e)break;o+=a}return o};return l},95,31,2,3,40,192,193,64,187,55);I$(188,function(t,e,i,n,s){s._$$CacheListComments=t._$klass();var o=s._$$CacheListComments._$extend(n._$$CacheListAbstract);o.__reset=function(t){this.__super(t);this.__page=1};o.__doLoadList=function(t){var n=(t.key,t.data,t.offset,t.limit,t.rkey,t.onload);i._$request("/comment/"+e._$get("value-bookId").value+"/comments?page="+this.__page+"&pageSize=30",{type:"json",method:"GET",onload:function(t){var e=t.comments||[];this.__page++;n(e)}._$bind(this),onerror:function(t){}._$bind(this)})}},31,2,43,79);I$(196,'{list beg..end as y} {var x = xlist[y]} {if doesNeedRenderVolumeTitle(y)} <h2 class="section-title f-toe">${getVolumeTitleWithOffset(y)|escape}</h2> {/if} <a class="m-chapter-item {if isCurrent(x.sectionId)}is-current{/if}" data-log="detail,catalog_read_click,${x.bookId}" href="/reader/${x.bookId}/${x.sectionId}">     <div class="chapter-item-content">       <div class="f-toe">${x.titleOrder|default:" "|escape}</div>       {if x.needPay == 1 && !x.paied}<i class="icon icon-mh icon-lock-open"></i>{/if}     </div> </a> {/list}');I$(180,function(t,e,i,n,s){s._$$CacheListCatalog=t._$klass();var o=s._$$CacheListCatalog._$extend(n._$$CacheListAbstract);o.__init=function(t){this.__kCache={};this.__super(t)};o.__doLoadList=function(t){var e=t.key,n=t.data,s=(t.offset,t.limit,t.rkey,t.onload);if(!this.__kCache[e])i._$request("/book/catalog/"+n.bookId+".json",{type:"json",method:"GET",onload:function(t){var i=t.catalog.sections;this.__kCache[e]=i;this._$setLoaded(e);s(this.__generateList(i))}._$bind(this),onerror:function(t){}});else{var o=this.__kCache[e];if(n.reverse)o=this.__reverse(o);o=this.__generateList(o);setTimeout(function(){this._$setLoaded(e);s(o)}._$bind(this),20)}};o.__generateList=function(t){var i=[];if(0===t.length)return i;this._$hasSections=t.length>1;this.__offsetMap={};var n=0;e._$forEach(t,function(t,e){i=i.concat(t.sections);if("0"!=t.sectionId)this.__offsetMap[n]=t.title;n+=t.sections.length},this);return i};o.__reverse=function(t){t.reverse();e._$forEach(t,function(t,e){t.sections.reverse()});return t};o._$getOffsetMap=function(){return this._$hasSections?this.__offsetMap:{}}},31,3,14,79);I$(189,function(t,e,i,n,s,o,a,r,_,c){c._$$Catalog=t._$klass();var l=c._$$Catalog._$extend(i._$$EventTarget),d=s._$add(r);l.__reset=function(t){this.__id=t.bookId;this.__bookProgressSectionId=t.bookProgressSectionId;this.__parent=e._$get(t.parent);this.__super(this);this.__getNode();this.__render()};l.__getNode=function(){var t=e._$getByClassName(this.__parent,"js-flag"),i=0;this.__listContainer=t[i++];this.__moreNode=t[i++]};l._$toggleOrder=function(){this.__render(!0)};l.__render=function(t){var e=this;if(this.__list){this.__list._$recycle();this.__list=null}this.__list=o._$$ListModuleWF._$allocate({first:12,limit:999999,parent:this.__listContainer,item:{klass:d,getVolumeTitleWithOffset:function(t){return e.__list._$cache()._$getOffsetMap()[t]},doesNeedRenderVolumeTitle:function(t){return e.__list._$cache()._$hasSections&&e.__list._$cache()._$getOffsetMap()[t]},isCurrent:function(t){return e.__bookProgressSectionId===t}},cache:{lkey:"list-catalog",key:"sectionId",data:{bookId:this.__id,reverse:!!t},klass:_._$$CacheListCatalog,clear:!0},more:this.__moreNode,onbeforelistload:function(t){t.value='<div class="loading"><img src="/images/reader/loading.gif"></div>';
},onemptylist:function(t){t.value='<div class="nodata"><i class="icon sprite-face-angry"></i><div class="plain-text">鍟婂挧...璇ユ极鐢荤洰褰曚负绌哄攭</div></div>'}})};return c},31,2,32,37,40,93,5,196,180);!function(t,e){function i(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function n(t){return s?s+t:t.toLowerCase()}var s,o,a,r,_,c,l,d,h,u,f="",p={Webkit:"webkit",Moz:"",O:"o"},g=document.createElement("div"),m=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,v={};t.each(p,function(t,i){if(g.style[t+"TransitionProperty"]!==e){f="-"+t.toLowerCase()+"-";s=i;return!1}});o=f+"transform";v[a=f+"transition-property"]=v[r=f+"transition-duration"]=v[c=f+"transition-delay"]=v[_=f+"transition-timing-function"]=v[l=f+"animation-name"]=v[d=f+"animation-duration"]=v[u=f+"animation-delay"]=v[h=f+"animation-timing-function"]="";t.fx={off:s===e&&g.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:f,transitionEnd:n("TransitionEnd"),animationEnd:n("AnimationEnd")};t.fn.animate=function(i,n,s,o,a){if(t.isFunction(n))o=n,s=e,n=e;if(t.isFunction(s))o=s,s=e;if(t.isPlainObject(n))s=n.easing,o=n.complete,a=n.delay,n=n.duration;if(n)n=("number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default)/1e3;if(a)a=parseFloat(a)/1e3;return this.anim(i,n,s,o,a)};t.fn.anim=function(n,s,f,p,g){var $,y,b,x={},w="",k=this,I=t.fx.transitionEnd,C=!1;if(s===e)s=t.fx.speeds._default/1e3;if(g===e)g=0;if(t.fx.off)s=0;if("string"==typeof n){x[l]=n;x[d]=s+"s";x[u]=g+"s";x[h]=f||"linear";I=t.fx.animationEnd}else{y=[];for($ in n)if(m.test($))w+=$+"("+n[$]+") ";else x[$]=n[$],y.push(i($));if(w)x[o]=w,y.push(o);if(s>0&&"object"==typeof n){x[a]=y.join(", ");x[r]=s+"s";x[c]=g+"s";x[_]=f||"linear"}}b=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(I,b)}else t(this).unbind(I,b);C=!0;t(this).css(v);p&&p.call(this)};if(s>0){this.bind(I,b);setTimeout(function(){if(!C)b.call(k)},1e3*(s+g)+25)}this.size()&&this.get(0).clientLeft;this.css(x);if(s<=0)setTimeout(function(){k.each(function(){b.call(this)})},0);return this};g=null}(Zepto);I$(191,function(t,e,i,n,s,o,a,r,_,c,l,d,h,u,f,p,g,m,v,y,b,x,w,k){k._$$PageDetail=v._$klass();var I=k._$$PageDetail._$extend(y._$$EventTarget);l._$parseTemplate("js-configs");var C,E=window.__configInfos,S=!1;I.__reset=function(t){function o(){Bridge.comic.callHandler("pageRedirect",{path:"detail",query:{id:t.bookId}})}function a(){l(document.getElementById("run-download"),"click")}function l(t,e){var i;if(t.ownerDocument)i=t.ownerDocument;else if(9==t.nodeType)i=t;else throw new Error("Invalid node passed to fireEvent: "+t.id);if(t.dispatchEvent){var n="";switch(e){case"click":case"mousedown":case"mouseup":n="MouseEvents";break;case"focus":case"change":case"blur":case"select":n="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+e+"'."}var s=i.createEvent(n),o="change"==e?!1:!0;s.initEvent(e,o,!0);s.synthetic=!0;t.dispatchEvent(s,!0)}else if(t.fireEvent){var s=i.createEventObject();s.synthetic=!0;t.fireEvent("on"+e,s)}}this.__catalog=m._$$Catalog._$allocate(t);var d=n._$query2object(location.search.slice(1));if("openinapp"in d)if(!(x._$IS.ios&&parseInt(x._$KERNEL.version,10)>=9)){if(x._$IS.android){a();if(/mqqbrowser/i.test(navigator.userAgent))i._$addEvent("run-download","click",function(){alert("QQ娴忚鍣ㄧ姝簡鎵撳紑缃戞槗婕敾App锛岃浣跨敤鍏朵粬娴忚鍣ㄥ啀璇�")})}else if(x._$IS.ios)o()}else document.getElementById("foot-fixed").style.visibility="visible";else;var h="comment"==window.location.hash.slice(1)?1:0;if(h)if(window.downloadLayer)window.downloadLayer._$hide();c._$$Tab._$allocate({list:e._$getChildren("tab"),index:h,selected:"active",onchange:function(t){i._$stopDefault(t);if(t.index!==t.last)if(0==t.index){e._$style("m-comment-wrp",{display:"none"});e._$style("catalog",{display:"block"});e._$style("loading",{display:"none"});$("#comment-pub").parent().hide();if(window.downloadLayer)window.downloadLayer._$appendTo(document.body)}else{e._$style("m-comment-wrp",{display:"block"});e._$style("catalog",{display:"none"});if(!S)this.createComments();if(!window.PG_CONFIG||!window.PG_CONFIG.noSendComment)$("#comment-pub").parent().show();if(window.downloadLayer)window.downloadLayer._$hide()}else if(0==t.index){var n=e._$getByClassName(t.list[0],"js-flag")[0];if("reverse"==e._$dataset(n,"order")){e._$replaceClassName(n,"sprite-app-order-reverse","sprite-app-order");e._$dataset(n,"order","normal");n.parentNode.setAttribute("data-log","detail,catalog_counter_clockwise_order,"+e._$get("value-bookId").value)}else{e._$replaceClassName(n,"sprite-app-order","sprite-app-order-reverse");e._$dataset(n,"order","reverse");n.parentNode.setAttribute("data-log","detail,catalog_clockwise_order,"+e._$get("value-bookId").value)}this.__catalog._$toggleOrder()}}._$bind(this)});var u="true"==e._$attr("isSubscribe","isSubscribe")?!0:!1;this.init();var p=s._$$Toast._$allocate({parent:document.body}),g=_._$$CacheComic._$allocate({ondataload:function(t){if("favorite"==t.type){if("favorite"==t.type){var i=this.__getDataInCache(t.key);if(i.subscribed){u=!0;if(window.PG_CONFIG&&window.PG_CONFIG.isSogou)w._$alert("鏀惰棌鎴愬姛锛岃鍒伴椤�-婕敾閲屾煡鐪�");else p._$toastShow({tipContent:"宸插姞鍏ユ垜鐨勬敹钘� ( ^蠅^ )",delay:3e3})}else{u=!1;if(window.PG_CONFIG&&window.PG_CONFIG.isSogou)w._$alert("宸插彇娑堟敹钘� (藝藣藝)");else p._$toastShow({tipContent:"宸插彇娑堟敹钘� (藝藣藝)",delay:3e3})}}if(i.subscribed){e._$addClassName("favorite1","is-active");e._$addClassName("favorite2","is-active");e._$get("favorite1").setAttribute("data-log","detail,del_favorite,"+e._$get("value-bookId").value);e._$get("favorite2").setAttribute("data-log","detail,del_favorite,"+e._$get("value-bookId").value);e._$get("favorite1").innerHTML="宸叉敹钘�";e._$get("favorite2").innerHTML="宸叉敹钘�"}else{e._$delClassName("favorite1","is-active");e._$delClassName("favorite2","is-active");e._$get("favorite1").setAttribute("data-log","detail,add_favorite,"+e._$get("value-bookId").value);e._$get("favorite2").setAttribute("data-log","detail,add_favorite,"+e._$get("value-bookId").value);e._$get("favorite1").innerHTML="+鏀惰棌";e._$get("favorite2").innerHTML="+鏀惰棌"}}}});g.__setDataInCache(e._$get("value-bookId").value,{subscribed:u});r._$$sysMatch._$allocate({});if(!0){var v=e._$get("value-bookCover").value;if(v.indexOf("?")!=-1)v+="|imageView&enlarge=1&thumbnail=375z525|imageView&blur=20x10";else v+="?imageView&enlarge=1&thumbnail=375z525|imageView&blur=20x10";e._$style("bgd",{backgroundImage:"url("+v+")"})}f._$$CommentAdd._$getInstance({parent:document.body,create:this,isShow:1==h&&!window.PG_CONFIG.noSendComment});e._$style("bgd",{opacity:1});window.onresize=this.init;window.onorientationchange=function(){setTimeout(function(){if(parseInt(e._$getStyle("intro","height"))>46){e._$style("m-intro",{height:"46px"});e._$style("flex",{display:"block"})}else{e._$style("m-intro",{height:"auto"});e._$style("flex",{display:"none"})}},200)};if(parseInt(e._$getStyle("intro","height"))>46){e._$style("m-intro",{height:"46px"});e._$style("flex",{display:"block"})}i._$addEvent(window,"touchmove",function(t){if(!e._$hasClassName(document.documentElement,"fixed"))if(document.body.scrollTop>=C)e._$style("read2",{visibility:"visible"});else e._$style("read2",{visibility:"hidden"})});i._$addEvent(window,"scroll",function(t){if(!e._$hasClassName(document.documentElement,"fixed"))if(document.body.scrollTop>=C)e._$style("read2",{visibility:"visible"});else e._$style("read2",{visibility:"hidden"})});i._$addEvent(e._$get("favorite1"),"click",function(){g._$favorite(e._$get("value-bookId").value)});i._$addEvent(e._$get("favorite2"),"click",function(){g._$favorite(e._$get("value-bookId").value)})};I.init=function(){"true"==e._$attr("isSubscribe","isSubscribe")?!0:!1;i._$addEvent(e._$get("m-intro"),"click",this.SH);i._$addEvent(e._$get("flex"),"click",this.SH);var t=(window.innerHeight>0?window.innerHeight:screen.height,window.innerWidth>0?window.innerWidth:screen.width);e._$style("bgd",{height:32*t/75+"px"});var n=parseInt(e._$getStyle("bgd","height"))/.75;if(n>250){n=250;e._$style("bgd",{height:.75*n+"px"})}if(parseInt(e._$getStyle("info","height"))>=.38*n)e._$style(e._$getByClassName("info","u-ellipsis")[1],{margin:0});e._$style("details",{height:n+"px"});C=n-38;var s=.63*n*(102/142.781);e._$style("cover",{width:s+"px"});e._$style("cover-info",{width:s+"px"})};I.SH=function(){if(parseInt(e._$getStyle("intro","height"))>46){var t=e._$get("m-intro");if("auto"==t.style.height){e._$style(t,{height:"46px"});e._$replaceClassName("flex-i","sprite-app-pack-up","sprite-app-unfold")}else{e._$style(t,{height:"auto"});e._$replaceClassName("flex-i","sprite-app-unfold","sprite-app-pack-up")}}};I.createComments=function(){this.__list=h._$$ListModuleWF._$allocate({limit:30,parent:"m-comment-wrp",item:{klass:u},sbody:document,cache:{lkey:"comment-list",key:"id",data:{},clear:!0,klass:p._$$CacheListComments},onbeforelistload:function(t){var e="loading";if(this.__ropt.offset>0)e+=" loading--mini";t.value='<div class="'+e+'"><img src="/images/reader/loading.gif"></div>'},onafterlistrender:function(){S=!0}._$bind(this),onemptylist:function(t){t.value='<div class="downloadExp downloadExp-when-nocomment"><a id="downloadExp-when-nocomment" href="javascript:;"><div class="i-wrp exp"><i class="icon sprite-face-temptation"></i></div><div class="i-wrp text">搴婅繕鏄┖鐨勶紝蹇潵鎶㈠簥浣嶅悥~</div></a></div>'}})};k._$$PageDetail._$allocate({parent:"catalog",bookId:E.bookId,bookProgressSectionId:E.bookProgressSectionId})},151,2,5,3,17,127,185,128,156,130,37,40,89,186,187,188,117,189,31,32,190,6,85);